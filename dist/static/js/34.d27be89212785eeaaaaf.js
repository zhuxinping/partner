webpackJsonp([34,57],{"3P+7":function(t,s){},FXMZ:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});e("q/am");var a=e("4VPn"),i=e.n(a),o=e("X2Oc");e("7+uW").default.component(i.a.name,i.a);var c={name:"Model",props:{show:!1},data:function(){return{popupVisible:!1,select_date:[{name:"已达标",check:!1,code:1},{name:"未达标",check:!1,code:2}],schoolClassify:[],schoolType:[],schoolActive:[],selectIndex:null,schoolClassifyIndex:"",schoolTypeIndex:"",schoolActiveIndex:""}},mounted:function(){this.getInformation()},methods:{getInformation:function(){var t=this;Object(o.j)("SCH_CATEGORY").then(function(s){t.schoolClassify=s}),Object(o.f)("SCHOOL_TYPE",null).then(function(s){t.schoolType=s}),Object(o.f)("SCHOOL_ACT_LEVEL",null).then(function(s){t.schoolActive=s})},selectDate:function(t){t.check=!t.check},reset:function(){this.select_date=[{name:"已达标",check:!1,code:1},{name:"未达标",check:!1,code:2}],this.getInformation(),this.selectIndex="",this.schoolClassifyIndex=Object(o.h)(this.schoolClassify,"dataId"),this.schoolTypeIndex=Object(o.h)(this.schoolType,"code"),this.schoolActiveIndex=Object(o.h)(this.schoolActive,"name")},selectSuccess:function(){Object(o.h)(this.select_date,"code").length>1?this.selectIndex="3":this.selectIndex=Object(o.h)(this.select_date,"code"),this.schoolClassifyIndex=Object(o.h)(this.schoolClassify,"dataId"),this.schoolTypeIndex=Object(o.h)(this.schoolType,"code"),this.schoolActiveIndex=Object(o.h)(this.schoolActive,"name"),this.$emit("success",this.selectIndex,this.schoolClassifyIndex,this.schoolTypeIndex,this.schoolActiveIndex)}},watch:{show:function(t,s){t&&(this.popupVisible=!0)},popupVisible:function(t,s){t||this.$emit("change")}}},n={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.show?e("div",[e("mt-popup",{staticClass:"share-popup",attrs:{position:"bottom"},model:{value:t.popupVisible,callback:function(s){t.popupVisible=s},expression:"popupVisible"}},[e("ul",{staticClass:"picker"},[e("li",{staticClass:"date"},[e("div",{staticClass:"title"},[e("span",[t._v("是否达标")])]),t._v(" "),e("div",{staticClass:"label"},t._l(t.select_date,function(s,a){return e("span",{key:a,class:s.check?"click_span":"",on:{click:function(e){return t.selectDate(s)}}},[t._v(t._s(s.name))])}),0)]),t._v(" "),e("li",{staticClass:"date"},[e("div",{staticClass:"title"},[e("span",[t._v("学校类别")])]),t._v(" "),e("div",{staticClass:"label"},t._l(t.schoolClassify,function(s,a){return e("span",{key:a,class:s.check?"click_span":"",on:{click:function(e){return t.selectDate(s)}}},[t._v(t._s(s.dataName))])}),0)]),t._v(" "),e("li",{staticClass:"date"},[e("div",{staticClass:"title"},[e("span",[t._v("学校类型")])]),t._v(" "),e("div",{staticClass:"label"},t._l(t.schoolType,function(s,a){return e("span",{key:a,class:s.check?"click_span":"",on:{click:function(e){return t.selectDate(s)}}},[t._v(t._s(s.name))])}),0)]),t._v(" "),e("li",{staticClass:"date",staticStyle:{"border-bottom":"0px"}},[e("div",{staticClass:"title"},[e("span",[t._v("活跃级别")])]),t._v(" "),e("div",{staticClass:"label"},t._l(t.schoolActive,function(s,a){return e("span",{key:a,class:s.check?"click_span":"",on:{click:function(e){return t.selectDate(s)}}},[t._v(t._s(s.name))])}),0)]),t._v(" "),e("li",{staticClass:"button"},[e("div",{on:{click:t.reset}},[t._v("重置")]),t._v(" "),e("div",{staticClass:"success",on:{click:t.selectSuccess}},[t._v("完成")])])])])],1):t._e()},staticRenderFns:[]};var l=e("VU/8")(c,n,!1,function(t){e("3P+7")},"data-v-2b6a7cb5",null);s.default=l.exports},dT9v:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("mvHQ"),i=e.n(a),o=(e("ehhp"),e("NVmV")),c=e.n(o),n=e("7+uW"),l=e("X2Oc"),r=e("gyMJ"),h=e("TXDt"),d=e("PPs4"),u=e("FXMZ"),v=e("KgXo");n.default.component(c.a.name,c.a);var p={name:"index",components:{MHeader:h.a,DialogModal:d.a,Model:u.default,VLoading:v.a},data:function(){return{actionCode:Object(l.n)("actionCode")?i()(Object(l.n)("actionCode")):"",searchSchoolName:"",list:[],infoInform:Object(l.n)("infoInform")?Object(l.n)("infoInform"):"",page:1,pageSize:10,delayLoad:!1,switch:!0,loadingFlag:!0,status:["导入比","激活比","学生激活率"],statusIndex:1,schoolClassifyIndex:"",schoolTypeIndex:"",schoolActiveIndex:"",date:"",playFlag:!1,activationObject:{},modelFlag:!1}},beforeRouteEnter:function(t,s,e){"ZtpartnerHome"!==s.name&&"ZtactiveAnalyzing"!==s.name||(t.meta.type=1),t.meta.id=t.params.id,e()},mounted:function(){this.delayLoad=!0,this.statusIndex=~~this.$route.meta.type,this.getData(),this.getActivationInfo(),document.getElementById("searchSchool").addEventListener("input",Object(l.e)(this.searchSchool,300),!1),2===this.statusIndex?Object(l.r)("05_01_student_active_rate","0"):1===this.statusIndex?Object(l.r)("05_01_activation_ratio","0"):Object(l.r)("05_01_import_ratio","0")},methods:{handleClose:function(){2==~~Object(l.m)("activeAnaly")?this.$router.push("/activeAnalyzing"):3==~~Object(l.m)("activeAnaly")?this.$router.push("/activeFrom"):this.$router.push("/home")},selectSuccess:function(t,s,e,a){this.selectIndex=t,this.schoolClassifyIndex=s,this.schoolTypeIndex=e,this.schoolActiveIndex=a,this.search()},search:function(){document.getElementsByClassName("main")[0].scrollTop=0,this.page=1,this.getData(1),this.modelFlag=!1,this.$refs.loading.onchange()},loadMore:function(){if(this.delayLoad)return!1;this.delayLoad=!0,this.getData(),this.$refs.loading.onchange()},loadTop:function(){this.page=1,this.getData(1),this.$refs.loading.onchange()},searchSchool:function(){document.getElementsByClassName("main")[0].scrollTop=0,this.$refs.mychild.reset(),this.page=1,this.schoolClassifyIndex="",this.schoolTypeIndex="",this.schoolActiveIndex="",this.getData(1)},getActivationInfo:function(){var t=this,s={};s.agentId=this.infoInform.id,s.type=this.statusIndex+1,this.infoInform.agentChildAccount&&(s.areaIds=this.infoInform.agentChildAuthArea),r.a.getActivationInfo(s,function(s){1e4===s.code?t.activationObject=s.body:Object(l.q)(s.message)})},getData:function(t){var s=this,e={};e.agentId=this.infoInform.id,e.pageNo=this.page,e.pageSize=this.pageSize,e.type=this.statusIndex+1,e.isStandard=this.selectIndex,e.schoolName=this.searchSchoolName,e.schoolCategoryVals=this.schoolClassifyIndex,e.schoolTypes=this.schoolTypeIndex,e.actLevels=this.schoolActiveIndex,this.infoInform.agentChildAccount&&(e.areaIds=this.infoInform.agentChildAuthArea),e.userCenterIdDing=this.infoInform.userCenterId,r.a.getActivationReportList(e,function(e){if(1e4===e.code){s.loadingFlag=!0;var a=e.body.date.substr(0,10).split("-");s.date=~~a[1]+"月"+~~a[2]+"日",e.body.list.result.forEach(function(t){t.importRatio=Object(l.o)(t.importRatio),t.activationRatio=Object(l.o)(t.activationRatio)}),s.list=t?e.body.list.result:s.list.concat(e.body.list.result),s.delayLoad=!1,s.page++,e.body.list.result.length<=s.pageSize-1&&(s.delayLoad=!0,s.$refs.loading.change())}else s.$refs.loading.change();s.switch=!0})},handleTopChange:function(){var t=this;this.switch=!1,setTimeout(function(){t.$refs.loadmore&&t.$refs.loadmore.onTopLoaded()},3e3)},selectStatus:function(t){this.$route.meta.type=t,this.statusIndex=t,this.searchSchoolName="",this.popupVisible=!1,this.getActivationInfo(),this.search()},baseInfrom:function(t,s){if(-1!==this.actionCode.indexOf('"buttonCode":"REPORT_MANAGE_DETAIL"')){if(!this.switch)return;Object(l.r)("05_01_linkto_school_info","1"),Object(l.n)("base",s),Object(l.n)("state","0"),Object(l.n)("basePath","1"),this.statusIndex?this.$router.push({path:"/reportBaseInfrom/2/"+t}):this.$router.push({path:"/reportBaseInfrom/1/"+t})}else Object(l.q)("您没有查看列表详情的权限！")}}},_={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"container"},[a("div",{staticClass:"flex"},[a("m-header",{attrs:{headerTitle:"激活报表"},on:{backClick:t.handleClose}}),t._v(" "),a("span",{staticClass:"right-text"},[t._v("昨天("+t._s(t.date)+")")]),t._v(" "),a("ul",{staticClass:"nav-status"},t._l(t.status,function(s,e){return a("li",{key:e,staticClass:"status",on:{click:function(s){return t.selectStatus(e)}}},[a("span",{staticClass:"bg-color",class:e==t.statusIndex?"change-color":""},[t._v(t._s(s))])])}),0),t._v(" "),a("div",{staticClass:"search"},[a("div",{staticClass:"search_school search-input"},[a("img",{attrs:{src:e("4Fmw"),alt:""}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchSchoolName,expression:"searchSchoolName"}],attrs:{id:"searchSchool",type:"text",placeholder:"输入学校名称关键字搜索"},domProps:{value:t.searchSchoolName},on:{input:function(s){s.target.composing||(t.searchSchoolName=s.target.value)}}})]),t._v(" "),a("img",{staticClass:"screen",attrs:{src:e("JSM+"),alt:""},on:{click:function(s){t.modelFlag=!0}}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:-1!=t.actionCode.indexOf('"codeId":"ACTIVATE_REPORT_COUNT_MENU"'),expression:'actionCode.indexOf("\\"codeId\\":\\"ACTIVATE_REPORT_COUNT_MENU\\"") ==-1?false:true'}],staticClass:"active-text"},[a("div",[a("p",{staticClass:"p-text"},[t._v("昨天新增"+t._s(t.status[t.statusIndex])+"达标园 "+t._s(t.activationObject.standardsTotalYesterdayCount)+" 家；")]),t._v(" "),a("p",{staticClass:"p-text"},[t._v("本周新增"+t._s(t.status[t.statusIndex])+"达标园 "+t._s(t.activationObject.standardsTotalWeekCount)+" 家；")]),t._v(" "),a("p",{staticClass:"p-text"},[t._v("已达标 "+t._s(t.activationObject.standardCount)+" 家，达标率 "+t._s(t.activationObject.controlRatesStr)+"，未达标 "+t._s(t.activationObject.belowStandardCount)+" 家")])]),t._v(" "),a("i",{staticClass:"icon-wenhao",on:{click:function(s){t.playFlag=!0}}})])],1),t._v(" "),a("mt-loadmore",{directives:[{name:"code",rawName:"v-code",value:"ACTIVATE_REPORT_LIST",expression:'"ACTIVATE_REPORT_LIST"'}],ref:"loadmore",staticClass:"main",attrs:{"top-method":t.loadTop,topLoadingText:"正在刷新..."},on:{"top-status-change":t.handleTopChange}},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],attrs:{"infinite-scroll-distance":"100","infinite-scroll-immediate-check":!0}},t._l(t.list,function(s,e){return a("ul",{key:s.id,staticClass:"from-table",on:{click:function(e){return e.preventDefault(),t.baseInfrom(s.schoolId,s)}}},[a("li",{staticClass:"table-li from-li"},[a("span",{staticClass:"li-index",class:2==s.isStandard?"school-radio":""},[t._v(t._s(e+1))]),t._v(" "),a("div",{staticClass:"li-center"},[a("div",{staticClass:"center-top"},[a("span",{staticClass:"serial",class:2==s.isStandard?"school-radio":""},[t._v(t._s(s.schoolNumber))]),t._v(" "),a("span",{staticClass:"school-name",class:2==s.isStandard?"school-radio":""},[t._v(t._s(s.schoolName))])]),t._v(" "),a("div",{staticClass:"center-bottom"},[s.schoolCategoryVal?a("span",{staticClass:"school-bottom"},[t._v(t._s(s.schoolCategoryVal))]):t._e(),t._v(" "),s.schoolTypeStr?a("span",{staticClass:"school-bottom"},[t._v(t._s(s.schoolTypeStr))]):t._e(),t._v(" "),s.schoolActLevel?a("span",{staticClass:"school-bottom"},[t._v("活跃"+t._s(s.schoolActLevel)+"级")]):t._e()])]),t._v(" "),a("div",{staticClass:"li-right"},[0==t.statusIndex?a("span",{staticClass:"radio",class:2==s.isStandard?"school-radio":""},[t._v(t._s(s.importRatio))]):1==t.statusIndex?a("span",{staticClass:"radio",class:2==s.isStandard?"school-radio":""},[t._v(t._s(s.activationRatio))]):a("span",{staticClass:"radio",class:2==s.isStandard?"school-radio":""},[t._v(t._s(s.studentActivationRatioStr))]),t._v(" "),a("i",{staticClass:"icon-right"})])])])}),0),t._v(" "),a("v-loading",{ref:"loading",attrs:{loadingFlag:!0}})],1),t._v(" "),a("dialogModal",{attrs:{isShow:t.playFlag},on:{close:function(s){t.playFlag=!1}}},[a("ul",{staticClass:"alert_ul",attrs:{slot:"content"},slot:"content"},[a("li",{staticClass:"example",staticStyle:{"margin-top":"15px"}},[a("p",{staticClass:"raito"},[t._v("导入比:")]),t._v(" "),a("p",{staticClass:"roito-left"},[t._v("一个在读学生导入多少个家长。")]),t._v(" "),a("p",{staticClass:"roito-left"},[t._v("在读学生家长数"),a("span",[t._v("÷")]),t._v("在读学生数")])]),t._v(" "),a("li",{staticClass:"example"},[a("p",{staticClass:"raito"},[t._v("导入比目标值: "),a("span",[t._v(t._s(t._f("numFilter")(t.activationObject.importTheRatioTargetValue)))])])]),t._v(" "),a("li",{staticClass:"example"},[a("p",{staticClass:"raito"},[t._v("激活比:")]),t._v(" "),a("p",{staticClass:"roito-left"},[t._v("一个在读学生有多少个激活的家长。")]),t._v(" "),a("p",{staticClass:"roito-left"},[t._v("在读激活家长数"),a("span",[t._v("÷")]),t._v("在读学生数")])]),t._v(" "),a("li",{staticClass:"example"},[a("p",{staticClass:"raito"},[t._v("激活比目标值: "),a("span",[t._v(t._s(t._f("numFilter")(t.activationObject.activateTheRatioTargetValue)))])])]),t._v(" "),a("li",{staticClass:"example"},[a("p",{staticClass:"raito"},[t._v("激活率:")]),t._v(" "),a("p",{staticClass:"roito-left"},[t._v("导入的用户中有百分之多少激活了")]),t._v(" "),a("p",{staticClass:"roito-left"},[t._v("激活数"),a("span",[t._v("÷")]),t._v("在读/在职数 * 100%")])]),t._v(" "),a("li",{staticClass:"example"},[a("p",{staticClass:"raito"},[t._v("学生激活率目标值: "),a("span",[t._v(t._s(t.activationObject.studentActivationRateTargetValue)+"%")])])])])]),t._v(" "),a("Model",{ref:"mychild",attrs:{show:t.modelFlag},on:{change:function(s){t.modelFlag=!1},success:t.selectSuccess}})],1)},staticRenderFns:[]},f=e("VU/8")(p,_,!1,null,null,null);s.default=f.exports}});