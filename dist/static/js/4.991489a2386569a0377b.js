webpackJsonp([4],{"50Oc":function(t,o){},FZmL:function(t,o){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkBAMAAAATLoWrAAAAJ1BMVEUAAADv7+/w8PDu7u7v7+/v7+/v7+/u7u7u7u7////u7u7u7u7v7+83FELBAAAADHRSTlMAfyHy372hTD0L57SIL92RAAAAeElEQVQoz2NgYFAMsTkDBYddhRiAgPEMChAACu05VjSBAQo41XNOAxWdamBAAhxrBBh0TjCggJ5DDDIJqEJsBxliClCF2I8y+CigCjEdYbCZgCrEeZjhDAMaODMqRLkQZkBjiw7MSMMWtZgJAEsywUxMWJMcZsIEADuuXzssWGPMAAAAAElFTkSuQmCC"},HMOr:function(t,o){},"I+Wd":function(t,o){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAWCAYAAAD0OH0aAAAAAXNSR0IArs4c6QAAAWFJREFUOBHNkjFLw0AUx9+7BNEOIi5u0kVoV90yGTMVOtm1g1C/gJ+gqKhbMzjXijgVXKQQsLRpJqfar5DVJS4dpC33vJeamJZUM3pwuf/93+//eIEDSFnXt63Cpf1QTCmBWDav7Lv96YRGUs7eWC/XFwKNRnt7RvAEQOu8WbOXDMUBIhJjGD8CUT4GlGaPa5GnRUJs7taVPo3uiXPPex3B4OV5wB7y59xulkBCR8m4E/uJJVWlXD+rOXhjt/ITkkMgWJg1Ac8lQrCG4kCfEt3/CXNENZwCNXmE93mLLF/6yEL9dwa73T4/heNsg2JbIMJWNjikdoSmYU3JIEMo0HU8EaZp+kJoVRWQv4QkMyHLkGUdOkKIi1UBrjHD9fDxseAn3Ov1O0RQ4nu01D86lnVURsRwgvh1spHLbVTV6f/A6H978bhxgCHDMAJEvaJCn/OtV9iLGqw8Pc8ruq5bSAO+AKaUdjcOw5MTAAAAAElFTkSuQmCC"},crxP:function(t,o){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAAPFBMVEUAAAB0qv91qv91qv91qf90qv98qv90qv90qf////+z0P/W5v93q//K3v/D2f/t9P+lx/+cwv+71f+Quv9kuTUmAAAACHRSTlMA+3/y370htOo8JlEAAACdSURBVDjLtdTrCsIwDAXgJL2srZvb9P3fVYpCwAOeIOz87Uco5CIz1UpO2r6iKRer8on5O0TtbZb2M8s01khMpCpDWmchXqpwVCRzlCVxlEQ5UmmBXI/WcVK03voOCE0fBLkB9DzAINr7BgbQo/cNDPzpPpUbQK7cAHLlBpGrwdtynH83WLnR0PiGFiG2UsaRxdacl7LI6YkfMX4OX/F7JtaEGZSFAAAAAElFTkSuQmCC"},mYqV:function(t,o){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAbCAYAAAC0s0UOAAAAAXNSR0IArs4c6QAAAPxJREFUKBVj7Ji4SO7X3z9z/zP8t2BkYDzBxsySzAIW+P/fhQEIgBIuID4TSAVIAAZAfCaQFpgAiAbxmUBmMDIy7gHyvoBoEB9ZEU3ZjCDTm/sXaTIy/DX5z8B8prYw7jpjS//82H///8////8/M9BJf5kYGRNZ/v7/38IAFADpAEn8ZWBoAfqIgRMkAAMgPhOQMwUmAKWnQC2aH/APFBBAf9cWJm5AU0Q7LuOkSUv43v/51QR0hsV/BoYTHPzCtSzvf/+aAfRLJFAABMx/fHgrBnQagzeEDyWBfJCP7qAIAvlMzAws6UDVT8ASQBrMB3GAocPUMnWeLIgG8QE15l/egM0DrQAAAABJRU5ErkJggg=="},mbAr:function(t,o){},s1XY:function(t,o){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAWCAYAAAD0OH0aAAAAAXNSR0IArs4c6QAAAVdJREFUOBHNkr9Lw0AUx+/OCA4dpItrx3bVf0DoVOik4NTB0r8g3RxUaMHRDs5aESehWyFLY4xDNvVf6OoStyr0cuf7xlwwIbYZfXC8X59v7uV4jBWY53l13/cbBS0m8kXXfd6NIv22XEaviPP9jCAIgqrWcqK13vo5coLab1EqIEAsFp/35GsGQJzUUi4NZrPHM61Zy8DGo4aeyTkC131qKRVNKUw/YIDEKyE22s3mvsPpRWpSqhdqZGbNCZCGliX2hJT6lpJ1MARVer1rjPCOrKR9lOT+NcYHlzdYhYMyU3LOH/BK22XghNkRm5z3GGfhWhExxB6LE7s7J0GHBGqFSIEBG+/Oud1zhBCDvwTogUE/Xj4EWO/haDwln9lY+lHn1O62yccTxDfESipUWKXDOJ8jj41i1AyMWipA0u8fhRZnh3TxFw5i1NBbacPRXePialwvgr4BzJyK7xzwUScAAAAASUVORK5CYII="},t4A4:function(t,o){},tV1J:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=e("mvHQ"),n=e.n(s),i=(e("34+y"),e("X+yh")),l=e.n(i),a=(e("ehhp"),e("NVmV")),r=e.n(a),p=e("7+uW"),c=e("TXDt"),u=e("gyMJ"),h=e("X2Oc"),m=e("PCIC"),d=e("KgXo"),v=e("w8Xk"),f=e.n(v);e("t4A4");p.default.component(r.a.name,r.a);var g={name:"FormsSchoolList",components:{MHeader:c.a,Sheader:m.default,VLoading:d.a},data:function(){return{mescroll:null,menuFlag:!1,delayLoad:!1,removeFlag:0,loadFlag:1,fsort:"DESC",infoInform:Object(h.n)("infoInform"),toption:[{name:"活跃时光集班级占比",sname:"s1",width:"74px",chk:0},{name:"活跃时光集占比",sname:"s2",width:"70px",chk:1},{name:"页面完成占比",sname:"s3",width:"70px",chk:1},{name:"页面完成率",sname:"s4",width:"70px",sort:1,chk:1},{name:"完本占比",sname:"s5",width:"70px",chk:0},{name:"购买数",sname:"s6",width:"60px",chk:0}],modelFlag:!1,listData:[],stime:"",hprvtime:"",schoolId:"",schoolName:"",pageNo:1,pageSize:20}},methods:{fsortfn:function(t){if(!t.sort)return!1;this.pageNo=1,this.fsort="DESC"===this.fsort?"ASC":"DESC",this.loadData()},setAttr:function(t){return parseFloat(t.replace(/,/g,""))},handleClose:function(){Object(h.l)("sFormsData"),this.$router.push("/home")},chosenPicker:function(){this.$refs.picker.chosenPicker()},tabData:function(t){this.stime=t,this.pageNo=1,this.loadData()},loadData:function(t){var o=this,e={agentId:this.infoInform.id,agentChildAccount:this.infoInform.agentChildAccount,agentChildAuthArea:this.infoInform.agentChildAuthArea,endDate:this.stime.replace(/\//g,"-"),schoolId:this.schoolId,pageNo:this.pageNo,pageSize:this.pageSize,sortField:"pageCompletedRate",sortOrder:this.fsort};o.loadFlag=1,o.$refs.loadModel.onchange(),t||(this.listData=[]),u.a.formsSchoolList(e,function(e){1e4===e.code&&(o.mescroll.endErr(),e.body&&e.body.result&&e.body.result.length?(o.listData=t?o.listData.concat(e.body.result):e.body.result,e.body.result.length<o.pageSize?(o.loadFlag=1,o.$refs.loadModel.change(),o.mescroll.lockUpScroll(!0)):(o.loadFlag=0,o.mescroll.lockUpScroll(!1))):(o.loadFlag=1,o.$refs.loadModel.change(),o.mescroll.lockUpScroll(!0)))})},filterMenu:function(t){return t.filter(function(t){return t.chk?1:0})},selMenu:function(t){var o={},e=0;if(this.toption.forEach(function(s){o[s.sname]=s.sname===t.sname?s.chk?0:1:s.chk,e=s.chk?++e:e}),e<=1&&t.chk)return l()("至少选择一项"),!1;t.chk=t.chk?0:1,this.$cookies.set("formsSchoolMenu",n()(o),31536e3)},formsClassList:function(t){if(!t.establishedState)return l()("学校还未开通时光集，请先进行开通"),!1;var o={sdate:this.stime,sname:t.schoolName,sid:t.schoolId,schoolSort:this.fsort};Object(h.m)("sFormsData",n()(o)),this.$router.push({name:"formsClassList"})},selectSchool:function(){var t={schoolSort:this.fsort,sdate:this.stime};Object(h.m)("sFormsData",n()(t)),this.$router.push({path:"/selectSchool/3"})},removeSchool:function(){this.schoolName="",this.schoolId="",this.pageNo=1,this.removeFlag=0,this.loadData()}},created:function(){this.$route.query.schoolName&&(this.schoolName=this.$route.query.schoolName,this.schoolId=this.$route.query.schoolId,this.removeFlag=1);var t=Object(h.m)("sFormsData");t="string"==typeof t?JSON.parse(t):t,this.fsort=t.schoolSort||this.fsort;var o=this.$cookies.get("formsSchoolMenu");if(o)for(var e in o="string"==typeof o?JSON.parse(o):o)for(var s in this.toption)e===this.toption[s].sname&&(this.toption[s].chk=~~o[e]);Object(h.r)("11_01_school_time_list","0")},mounted:function(){var t=this;this.mescroll=new f.a(this.$refs.mescroll,{down:{auto:!1,callback:function(){t.pageNo=1,t.loadData()}},up:{auto:!1,offset:70,callback:function(){++t.pageNo,t.loadData(1)}}})}},w={render:function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"container sgj-ct forms-school-list"},[s("m-header",{attrs:{headerTitle:"成长时光集报表"},on:{backClick:t.handleClose}}),t._v(" "),s("div",{staticClass:"search"},[s("div",{staticClass:"search_school"},[s("img",{attrs:{src:e("4Fmw"),alt:""}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.schoolName,expression:"schoolName"}],attrs:{type:"text",readonly:"",placeholder:"输入学校名称关键字搜索"},domProps:{value:t.schoolName},on:{click:t.selectSchool,input:function(o){o.target.composing||(t.schoolName=o.target.value)}}}),t._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:t.removeFlag,expression:"removeFlag"}],staticClass:"search-school-remove",attrs:{src:e("ShLw"),alt:""},on:{click:function(o){return t.removeSchool()}}})])]),t._v(" "),s("Sheader",{ref:"picker",attrs:{chosenFlag:"1",stitle:"成长时光集"},on:{tfd:t.tabData}},[s("ul",{staticClass:"sgj-ct-layer",attrs:{slot:"sgjDialog"},slot:"sgjDialog"},[s("li",{staticClass:"sgj-ct-title"},[t._v("以下数据为对应学校的相关数据")]),t._v(" "),s("li",[s("p",{staticClass:"raito"},[t._v("活跃时光集班级占比:")]),t._v("\n\t\t\t\t学校当天至少完成1个时光集页面的班级/学校已发布时光集的班级数\n\t\t\t")]),t._v(" "),s("li",[s("p",{staticClass:"raito"},[t._v("活跃时光集占比:")]),t._v("\n\t\t\t\t当天至少完成1个页面的时光集/已发布的时光集册数\n\t\t\t")]),t._v(" "),s("li",[s("p",{staticClass:"raito"},[t._v("页面完成占比:")]),t._v("\n\t\t\t\t已完成的总页面数/需要完成的总页面数\n\t\t\t")]),t._v(" "),s("li",[s("p",{staticClass:"raito"},[t._v("页面完成率:")]),t._v("\n\t\t\t\t已完成的总页面数/需要完成的总页面数*100%\n\t\t\t")]),t._v(" "),s("li",[s("p",{staticClass:"raito"},[t._v("完成占比:")]),t._v("\n\t\t\t\t已完本的时光集/已发布的时光集册数\n\t\t\t")]),t._v(" "),s("li",[s("p",{staticClass:"raito"},[t._v("购买数:")]),t._v("\n\t\t\t\t截止当前购买的时光集数\n\t\t\t")])])]),t._v(" "),s("div",{ref:"mescroll",staticClass:"mescroll"},[s("div",{staticClass:"forms-list"},[s("div",{staticClass:"forms-list-sel"},[s("span",{staticClass:"sel-icon",on:{click:function(o){t.menuFlag=!0}}},[s("img",{attrs:{src:e("mYqV"),alt:""}})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.menuFlag,expression:"menuFlag"}],staticClass:"sel-toggle"},[s("ul",t._l(t.toption,function(o,n){return s("li",{key:n,on:{click:function(e){return t.selMenu(o)}}},[o.chk?[s("img",{attrs:{src:e("crxP"),alt:""}}),t._v(t._s(o.name)+"\n\t\t\t\t\t\t\t")]:[s("img",{attrs:{src:e("FZmL"),alt:""}}),t._v(t._s(o.name)+"\n\t\t\t\t\t\t\t")]],2)}),0),t._v(" "),s("div",{staticClass:"sel-shade",on:{click:function(o){t.menuFlag=!1}}})])]),t._v(" "),s("div",{staticClass:"forms-list-left"},[s("table",{staticClass:"forms-tab"},[t._m(0),t._v(" "),t._l(t.listData,function(o,e){return s("tr",{key:e,on:{click:function(e){return t.formsClassList(o)}}},[s("td",{staticClass:"forms-list-content"},[s("div",{staticClass:"forms-list-t"},[s("div",{staticClass:"over-text"},[t._v(t._s(o.schoolName))])]),t._v(" "),s("span",{staticClass:"forms-list-b ratio-day"},[t._v("对比前一天")])])])})],2)]),t._v(" "),s("div",{staticClass:"forms-list-right"},[s("div",{staticClass:"forms-list-tab"},[s("table",{staticClass:"forms-tab"},[s("tr",{staticClass:"forms-list-title"},t._l(t.filterMenu(t.toption),function(o,n){return s("th",{key:n,on:{click:function(e){return t.fsortfn(o)}}},[[s("div",{staticClass:"layer-ct-sort over-text",style:{"min-width":o.width,"padding-right":o.sort?"12px":""}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(o.name)+"\n\t\t\t\t\t\t\t\t\t\t"),o.sort?s("span",{staticClass:"sort-icon"},["DESC"===t.fsort?s("img",{attrs:{src:e("I+Wd"),alt:""}}):s("img",{attrs:{src:e("s1XY"),alt:""}})]):t._e()])]],2)}),0),t._v(" "),t._l(t.listData,function(o,e){return s("tr",{key:e,on:{click:function(e){return t.formsClassList(o)}}},[t.toption[0].chk?[s("td",[s("div",{staticClass:"forms-list-t"},[t._v(t._s(o.activeClassAlbumRatio))]),t._v(" "),s("span",{staticClass:"forms-list-b",class:parseFloat(o.activeClassAlbumChangeNum)>0?"":"forms-list-red",style:{visibility:t.setAttr(o.activeClassAlbumChangeNum)?"":"hidden"}},[t._v("活跃班级"+t._s(parseFloat(o.activeClassAlbumChangeNum)>0?"+":"")+t._s(o.activeClassAlbumChangeNum))])])]:t._e(),t._v(" "),t.toption[1].chk?[s("td",[s("div",{staticClass:"forms-list-t"},[t._v(t._s(o.activeAlbumRatio))]),t._v(" "),s("span",{staticClass:"forms-list-b",class:parseFloat(o.activeAlbumChangeNum)>0?"":"forms-list-red",style:{visibility:t.setAttr(o.activeAlbumChangeNum)?"":"hidden"}},[t._v("活跃"+t._s(parseFloat(o.activeAlbumChangeNum)>0?"+":"")+t._s(o.activeAlbumChangeNum))])])]:t._e(),t._v(" "),t.toption[2].chk?[s("td",[s("div",{staticClass:"forms-list-t"},[t._v(t._s(o.pageCompletedRatio))]),t._v(" "),s("span",{staticClass:"forms-list-b",class:parseFloat(o.pageCompletedChangeNum)>0?"":"forms-list-red",style:{visibility:t.setAttr(o.pageCompletedChangeNum)?"":"hidden"}},[t._v("完成页"+t._s(parseFloat(o.pageCompletedChangeNum)>0?"+":"")+t._s(o.pageCompletedChangeNum))])])]:t._e(),t._v(" "),t.toption[3].chk?[s("td",[s("div",{staticClass:"forms-list-t"},[t._v(t._s(o.pageCompletedRate))]),t._v(" "),s("span",{staticClass:"forms-list-b",class:parseFloat(o.pageCompletedChangeRate)>0?"":"forms-list-red",style:{visibility:t.setAttr(o.pageCompletedChangeRate)?"":"hidden"}},[t._v("完成率"+t._s(parseFloat(o.pageCompletedChangeRate)>0?"+":"")+t._s(o.pageCompletedChangeRate))])])]:t._e(),t._v(" "),t.toption[4].chk?[s("td",[s("div",{staticClass:"forms-list-t"},[t._v(t._s(o.completedAlbumRatio))]),t._v(" "),s("span",{staticClass:"forms-list-b",class:parseFloat(o.completedAlbumChangeNum)>0?"":"forms-list-red",style:{visibility:t.setAttr(o.completedAlbumChangeNum)?"":"hidden"}},[t._v("完本数"+t._s(parseFloat(o.completedAlbumChangeNum)>0?"+":"")+t._s(o.completedAlbumChangeNum))])])]:t._e(),t._v(" "),t.toption[5].chk?[s("td",[s("div",{staticClass:"forms-list-t"},[t._v(t._s(o.purchasedNum))]),t._v(" "),s("span",{staticClass:"forms-list-b",class:parseFloat(o.purchasedChangeNum)>0?"":"forms-list-red",style:{visibility:t.setAttr(o.purchasedChangeNum)?"":"hidden"}},[t._v("购买数"+t._s(parseFloat(o.purchasedChangeNum)>0?"+":"")+t._s(o.purchasedChangeNum))])])]:t._e()],2)})],2)])]),t._v(" "),s("v-loading",{directives:[{name:"show",rawName:"v-show",value:t.loadFlag,expression:"loadFlag"}],ref:"loadModel",attrs:{loadingFlag:1}})],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,o=this._self._c||t;return o("tr",[o("th",[this._v("幼儿园名称")])])}]};var A=e("VU/8")(g,w,!1,function(t){e("mbAr"),e("HMOr"),e("50Oc")},"data-v-366c0cfb",null);o.default=A.exports},w8Xk:function(t,o,e){var s,n;
/*!
 * version 1.4.1 MIT
 * 2019-2-1 wenju
 * http://www.mescroll.com
 */void 0===(n="function"==typeof(s=function(){var t=function(t,o){var e=this;if(e.version="1.4.0",e.isScrollBody=!t||"body"===t,e.scrollDom=e.isScrollBody?document.body:e.getDomById(t),e.scrollDom){e.options=o||{};var s=navigator.userAgent,n=!!s.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),i=void 0===window.orientation,l=s.indexOf("Android")>-1||s.indexOf("Adr")>-1;e.os={ios:n,pc:i,android:l},e.isDownScrolling=!1,e.isUpScrolling=!1;var a=e.options.down&&e.options.down.callback;e.initDownScroll(),e.initUpScroll(),setTimeout(function(){e.optDown.use&&e.optDown.auto&&a&&(e.optDown.autoShowLoading?e.triggerDownScroll():e.optDown.callback&&e.optDown.callback(e)),e.optUp.use&&e.optUp.auto&&!e.isUpAutoLoad&&e.triggerUpScroll()},30)}};return t.prototype.extendDownScroll=function(o){t.extend(o,{use:!0,auto:!0,autoShowLoading:!1,isLock:!1,isBoth:!1,offset:80,inOffsetRate:1,outOffsetRate:.2,bottomOffset:20,minAngle:45,hardwareClass:"mescroll-hardware",mustToTop:!1,warpId:null,warpClass:"mescroll-downwarp",resetClass:"mescroll-downwarp-reset",textInOffset:"下拉刷新",textOutOffset:"释放更新",textLoading:"加载中 ...",htmlContent:'<p class="downwarp-progress"></p><p class="downwarp-tip"></p>',inited:function(t,o){t.downTipDom=o.getElementsByClassName("downwarp-tip")[0],t.downProgressDom=o.getElementsByClassName("downwarp-progress")[0]},inOffset:function(t){t.downTipDom&&(t.downTipDom.innerHTML=t.optDown.textInOffset),t.downProgressDom&&t.downProgressDom.classList.remove("mescroll-rotate")},outOffset:function(t){t.downTipDom&&(t.downTipDom.innerHTML=t.optDown.textOutOffset)},onMoving:function(t,o,e){if(t.downProgressDom){var s=360*o;t.downProgressDom.style.webkitTransform="rotate("+s+"deg)",t.downProgressDom.style.transform="rotate("+s+"deg)"}},beforeLoading:function(t,o){return!1},showLoading:function(t){t.downTipDom&&(t.downTipDom.innerHTML=t.optDown.textLoading),t.downProgressDom&&t.downProgressDom.classList.add("mescroll-rotate")},afterLoading:function(t){return 0},callback:function(t){t.resetUpScroll()}})},t.prototype.extendUpScroll=function(o){var e=this.os.pc;t.extend(o,{use:!0,auto:!0,isLock:!1,isBoth:!1,isBounce:!0,callback:null,page:{num:0,size:10,time:null},noMoreSize:5,offset:100,toTop:{warpId:null,src:null,html:null,offset:1e3,warpClass:"mescroll-totop",showClass:"mescroll-fade-in",hideClass:"mescroll-fade-out",fadeDuration:.5,duration:300,supportTap:!1,btnClick:null},loadFull:{use:!1,delay:500},empty:{warpId:null,icon:null,tip:"暂无相关数据~",btntext:"",btnClick:null,supportTap:!1},clearId:null,clearEmptyId:null,hardwareClass:"mescroll-hardware",warpId:null,warpClass:"mescroll-upwarp",htmlLoading:'<p class="upwarp-progress mescroll-rotate"></p><p class="upwarp-tip">加载中..</p>',htmlNodata:'<p class="upwarp-nodata">-- END --</p>',inited:function(t,o){},showLoading:function(t,o){o.innerHTML=t.optUp.htmlLoading},showNoMore:function(t,o){o.innerHTML=t.optUp.htmlNodata},onScroll:null,scrollbar:{use:e,barClass:"mescroll-bar"},lazyLoad:{use:!1,attr:"imgurl",showClass:"mescroll-lazy-in",delay:500,offset:200}})},t.extend=function(o,e){if(!o)return e;for(var s in e)null==o[s]?o[s]=e[s]:"object"==typeof o[s]&&t.extend(o[s],e[s]);return o},t.prototype.initDownScroll=function(){var t=this;if(t.optDown=t.options.down||{},t.extendDownScroll(t.optDown),t.touchstartEvent=function(o){t.isScrollTo&&t.preventDefault(o),t.startPoint=t.getPoint(o),t.lastPoint=t.startPoint,t.maxTouchmoveY=t.getBodyHeight()-t.optDown.bottomOffset,t.inTouchend=!1;var e=t.getScrollTop();t.isKeepTop=0===e,t.os.pc&&e<=0&&(t.scrollDom.addEventListener("mousemove",t.touchmoveEvent,{passive:!1}),document.ondragstart=function(){return!1})},t.scrollDom.addEventListener("mousedown",t.touchstartEvent),t.scrollDom.addEventListener("touchstart",t.touchstartEvent),t.touchmoveEvent=function(o){if(t.startPoint){var e=t.getScrollTop();e>0&&(t.isKeepTop=!1);var s=t.getPoint(o),n=s.y-t.startPoint.y;if(n>0){if(e<=0&&(t.preventDefault(o),t.optDown.use&&!t.inTouchend&&!t.isDownScrolling&&!t.optDown.isLock&&(!t.isUpScrolling||t.isUpScrolling&&t.optUp.isBoth))){if(t.optDown.mustToTop&&!t.isKeepTop)return;var i=Math.abs(t.lastPoint.x-s.x),l=Math.abs(t.lastPoint.y-s.y),a=Math.sqrt(i*i+l*l);if(0!==a)if(Math.asin(l/a)/Math.PI*180<t.optDown.minAngle)return;if(t.maxTouchmoveY>0&&s.y>=t.maxTouchmoveY)return t.inTouchend=!0,void t.touchendEvent();var r=s.y-t.lastPoint.y;t.downHight||(t.downHight=0),t.downHight<t.optDown.offset?(1!==t.movetype&&(t.movetype=1,t.optDown.inOffset(t),t.downwarp.classList.remove(t.optDown.resetClass),t.isMoveDown=!0,t.os.ios&&!t.isKeepTop&&(t.scrollDom.classList.add(t.optDown.hardwareClass),t.scrollDom.style.webkitOverflowScrolling="auto",t.isSetScrollAuto=!0)),t.downHight+=r*t.optDown.inOffsetRate):(2!==t.movetype&&(t.movetype=2,t.optDown.outOffset(t),t.downwarp.classList.remove(t.optDown.resetClass),t.isMoveDown=!0,t.os.ios&&!t.isKeepTop&&(t.scrollDom.classList.add(t.optDown.hardwareClass),t.scrollDom.style.webkitOverflowScrolling="auto",t.isSetScrollAuto=!0)),t.downHight+=r>0?r*t.optDown.outOffsetRate:r),t.downwarp.style.height=t.downHight+"px";var p=t.downHight/t.optDown.offset;t.optDown.onMoving(t,p,t.downHight)}}else if(n<0){var c=t.getScrollHeight(),u=t.getClientHeight(),h=c-u-e;!t.optUp.isBounce&&h<=0&&t.preventDefault(o),t.optUp.use&&!t.optUp.isLock&&t.optUp.hasNext&&!t.isUpScrolling&&(!t.isDownScrolling||t.isDownScrolling&&t.optDown.isBoth)&&(u+t.optUp.offset>=c||h<=0)&&t.triggerUpScroll()}t.lastPoint=s}},t.scrollDom.addEventListener("touchmove",t.touchmoveEvent,{passive:!1}),t.touchendEvent=function(){t.optDown.use&&t.isMoveDown&&(t.downHight>=t.optDown.offset?t.triggerDownScroll():(t.downwarp.classList.add(t.optDown.resetClass),t.downHight=0,t.downwarp.style.height=0),t.isSetScrollAuto&&(t.scrollDom.style.webkitOverflowScrolling="touch",t.scrollDom.classList.remove(t.optDown.hardwareClass),t.isSetScrollAuto=!1),t.movetype=0,t.isMoveDown=!1),t.os.pc&&(t.scrollDom.removeEventListener("mousemove",t.touchmoveEvent),document.ondragstart=function(){return!0})},t.scrollDom.addEventListener("mouseup",t.touchendEvent),t.scrollDom.addEventListener("mouseleave",t.touchendEvent),t.scrollDom.addEventListener("touchend",t.touchendEvent),t.scrollDom.addEventListener("touchcancel",t.touchendEvent),t.optDown.use){t.downwarp=document.createElement("div"),t.downwarp.className=t.optDown.warpClass,t.downwarp.innerHTML='<div class="downwarp-content">'+t.optDown.htmlContent+"</div>";var o=t.optDown.warpId?t.getDomById(t.optDown.warpId):t.scrollDom;t.optDown.warpId&&o?o.appendChild(t.downwarp):(o||(o=t.scrollDom),o.insertBefore(t.downwarp,t.scrollDom.firstChild)),setTimeout(function(){t.optDown.inited(t,t.downwarp)},0)}},t.prototype.preventDefault=function(t){t&&t.cancelable&&!t.defaultPrevented&&t.preventDefault()},t.prototype.getPoint=function(t){return{x:t.touches?t.touches[0].pageX:t.clientX,y:t.touches?t.touches[0].pageY:t.clientY}},t.prototype.triggerDownScroll=function(){this.optDown.beforeLoading(this,this.downwarp)||(this.showDownScroll(),this.optDown.callback&&this.optDown.callback(this))},t.prototype.showDownScroll=function(){this.isDownScrolling=!0,this.optDown.showLoading(this),this.downHight=this.optDown.offset,this.downwarp.classList.add(this.optDown.resetClass),this.downwarp.style.height=this.optDown.offset+"px"},t.prototype.endDownScroll=function(){var t=this,o=function(){t.downHight=0,t.downwarp.style.height=0,t.isDownScrolling=!1,t.downProgressDom&&t.downProgressDom.classList.remove("mescroll-rotate")},e=t.optDown.afterLoading(t);"number"==typeof e&&e>0?setTimeout(o,e):o()},t.prototype.lockDownScroll=function(t){null==t&&(t=!0),this.optDown.isLock=t},t.prototype.initUpScroll=function(){var t,o=this;(o.optUp=o.options.up||{use:!1},o.extendUpScroll(o.optUp),o.optUp.scrollbar.use&&o.scrollDom.classList.add(o.optUp.scrollbar.barClass),o.optUp.isBounce||o.setBounce(!1),!1!==o.optUp.use)&&(o.optUp.hasNext=!0,o.upwarp=document.createElement("div"),o.upwarp.className=o.optUp.warpClass,o.optUp.warpId&&(t=o.getDomById(o.optUp.warpId)),t||(t=o.scrollDom),t.appendChild(o.upwarp),o.preScrollY=0,o.lazyStartTime=(new Date).getTime(),o.lazyTag="mescroll-lazying",o.scrollEvent=function(){var t=o.getScrollTop(),e=t-o.preScrollY>0;(o.preScrollY=t,!o.isUpScrolling&&(!o.isDownScrolling||o.isDownScrolling&&o.optDown.isBoth))&&(!o.optUp.isLock&&o.optUp.hasNext&&o.getScrollHeight()-o.getClientHeight()-t<=o.optUp.offset&&e&&o.triggerUpScroll());var s=o.optUp.toTop;if((s.src||s.html)&&(t>=s.offset?o.showTopBtn():o.hideTopBtn()),o.optUp.lazyLoad.use){var n=(new Date).getTime();o.lazyTimer&&clearTimeout(o.lazyTimer),n-o.lazyStartTime>=o.optUp.lazyLoad.delay?(o.lazyStartTime=n,o.lazyLoad(0)):o.lazyTimer=o.lazyLoad()}o.optUp.onScroll&&o.optUp.onScroll(o,t,e)},o.isScrollBody?window.addEventListener("scroll",o.scrollEvent):o.scrollDom.addEventListener("scroll",o.scrollEvent),setTimeout(function(){o.optUp.inited(o,o.upwarp)},0))},t.prototype.setBounce=function(t){!this.isScrollBody&&this.os.ios&&(!1===t?(this.optUp.isBounce=!1,window.addEventListener("touchmove",this.bounceTouchmove,{passive:!1})):(this.optUp.isBounce=!0,window.removeEventListener("touchmove",this.bounceTouchmove)))},t.prototype.bounceTouchmove=function(t){for(var o=this,e=t.target,s=!0;e!==document.body&&e!==document;){var n=e.classList;if(n){if(n.contains("mescroll")||n.contains("mescroll-touch")){s=!1;break}if(n.contains("mescroll-touch-x")||n.contains("mescroll-touch-y")){var i=t.touches?t.touches[0].pageX:t.clientX,l=t.touches?t.touches[0].pageY:t.clientY;o.preWinX||(o.preWinX=i),o.preWinY||(o.preWinY=l);var a=Math.abs(o.preWinX-i),r=Math.abs(o.preWinY-l),p=Math.sqrt(a*a+r*r);if(o.preWinX=i,o.preWinY=l,0!==p){var c=Math.asin(r/p)/Math.PI*180;if(c<=45&&n.contains("mescroll-touch-x")||c>45&&n.contains("mescroll-touch-y")){s=!1;break}}}}e=e.parentNode}s&&t.cancelable&&!t.defaultPrevented&&"function"==typeof t.preventDefault&&t.preventDefault()},t.prototype.triggerUpScroll=function(){this.optUp.callback&&!this.isUpScrolling&&(this.showUpScroll(),this.optUp.page.num++,this.isUpAutoLoad=!0,this.optUp.callback(this.optUp.page,this))},t.prototype.showUpScroll=function(){this.isUpScrolling=!0,this.upwarp.classList.add(this.optUp.hardwareClass),this.upwarp.style.visibility="visible",this.upwarp.style.display="block",this.optUp.showLoading(this,this.upwarp)},t.prototype.showNoMore=function(){this.upwarp.style.visibility="visible",this.upwarp.style.display="block",this.optUp.hasNext=!1,this.optUp.showNoMore(this,this.upwarp)},t.prototype.hideUpScroll=function(t){t?this.upwarp.style.display="none":this.upwarp.style.visibility="hidden",this.upwarp.classList.remove(this.optUp.hardwareClass);var o=this.upwarp.getElementsByClassName("upwarp-progress")[0];o&&o.classList.remove("mescroll-rotate")},t.prototype.endUpScroll=function(t,o){null!=t&&(t?this.showNoMore():this.hideUpScroll(o)),this.isUpScrolling=!1},t.prototype.resetUpScroll=function(t){if(this.optUp&&this.optUp.use){var o=this.optUp.page;this.prePageNum=o.num,this.prePageTime=o.time,o.num=1,o.time=null,this.isDownScrolling||!1===t||(null==t?(this.removeEmpty(),this.clearDataList(),this.showUpScroll()):this.showDownScroll()),this.isUpAutoLoad=!0,this.optUp.callback&&this.optUp.callback(o,this)}},t.prototype.setPageNum=function(t){this.optUp.page.num=t-1},t.prototype.setPageSize=function(t){this.optUp.page.size=t},t.prototype.clearDataList=function(){var t=this.optUp.clearId||this.optUp.clearEmptyId;if(t){var o=this.getDomById(t);o&&(o.innerHTML="")}},t.prototype.endByPage=function(t,o,e){var s;this.optUp.use&&null!=o&&(s=this.optUp.page.num<o),this.endSuccess(t,s,e)},t.prototype.endBySize=function(t,o,e){var s;this.optUp.use&&null!=o&&(s=(this.optUp.page.num-1)*this.optUp.page.size+t<o);this.endSuccess(t,s,e)},t.prototype.endSuccess=function(t,o,e){var s=this;if(s.isDownScrolling&&s.endDownScroll(),s.optUp.use){var n;if(null!=t){var i=s.optUp.page.num,l=s.optUp.page.size;if(1===i&&(s.clearDataList(),e&&(s.optUp.page.time=e)),t<l||!1===o)if(s.optUp.hasNext=!1,0===t&&1===i)n=!1,s.showEmpty();else n=!((i-1)*l+t<s.optUp.noMoreSize),s.removeEmpty();else n=!1,s.optUp.hasNext=!0,s.removeEmpty()}var a=!s.optUp.hasNext;s.endUpScroll(n,a),s.loadFull(),s.optUp.lazyLoad.use&&s.lazyLoad(16)}},t.prototype.endErr=function(){if(this.isDownScrolling){var t=this.optUp.page;t&&this.prePageNum&&(t.num=this.prePageNum,t.time=this.prePageTime),this.endDownScroll()}this.isUpScrolling&&(this.optUp.page.num--,this.endUpScroll(!1))},t.prototype.loadFull=function(){var t=this;t.optUp.loadFull.use&&!t.optUp.isLock&&t.optUp.hasNext&&t.optUp.callback&&t.getScrollHeight()<=t.getClientHeight()&&setTimeout(function(){t.getScrollHeight()<=t.getClientHeight()&&t.triggerUpScroll()},t.optUp.loadFull.delay)},t.prototype.lockUpScroll=function(t){null==t&&(t=!0),this.optUp.isLock=t},t.prototype.showEmpty=function(){var t=this,o=t.optUp.empty,e=o.warpId||t.optUp.clearEmptyId;if(null!=e){var s=t.getDomById(e);if(s){t.removeEmpty();var n="";if(o.icon&&(n+='<img class="empty-icon" src="'+o.icon+'"/>'),o.tip&&(n+='<p class="empty-tip">'+o.tip+"</p>"),o.btntext&&(n+='<p class="empty-btn">'+o.btntext+"</p>"),t.emptyDom=document.createElement("div"),t.emptyDom.className="mescroll-empty",t.emptyDom.innerHTML=n,s.appendChild(t.emptyDom),o.btnClick){var i=t.emptyDom.getElementsByClassName("empty-btn")[0];o.supportTap?i.addEventListener("tap",function(e){e.stopPropagation(),t.preventDefault(e),o.btnClick()}):i.onclick=function(){o.btnClick()}}}}},t.prototype.removeEmpty=function(){this.removeChild(this.emptyDom)},t.prototype.showTopBtn=function(t){if(!this.topBtnShow){this.topBtnShow=!0;var o,e=this,s=e.optUp.toTop;if(null==e.toTopBtn)s.html?(e.toTopBtn=document.createElement("div"),e.toTopBtn.innerHTML=s.html):(e.toTopBtn=document.createElement("img"),e.toTopBtn.src=s.src),e.toTopBtn.className=s.warpClass,s.supportTap?e.toTopBtn.addEventListener("tap",function(t){t.stopPropagation(),e.preventDefault(t),!0!==(s.btnClick&&s.btnClick())&&e.scrollTo(0,e.optUp.toTop.duration)}):e.toTopBtn.onclick=function(){!0!==(s.btnClick&&s.btnClick())&&e.scrollTo(0,e.optUp.toTop.duration)},s.warpId&&(o=e.getDomById(s.warpId)),o||(o=document.body),o.appendChild(e.toTopBtn);e.toTopBtn.classList.remove(s.hideClass),e.toTopBtn.classList.add(s.showClass),e.setTopBtnFadeDuration(t)}},t.prototype.hideTopBtn=function(t){this.topBtnShow&&this.toTopBtn&&(this.topBtnShow=!1,this.toTopBtn.classList.remove(this.optUp.toTop.showClass),this.toTopBtn.classList.add(this.optUp.toTop.hideClass),this.setTopBtnFadeDuration(t))},t.prototype.setTopBtnFadeDuration=function(t){if(this.toTopBtn){var o=(null!=t?t:this.optUp.toTop.fadeDuration)+"s";this.toTopBtn.style.animationDuration=o,this.toTopBtn.style.webkitAnimationDuration=o}},t.prototype.scrollTo=function(t,o){var e=this,s=e.getScrollTop(),n=t;if(n>0){var i=e.getScrollHeight()-e.getClientHeight();n>i&&(n=i)}else n=0;e.isScrollTo=!0,e.scrollDom.style.webkitOverflowScrolling="auto",e.getStep(s,n,function(t){e.setScrollTop(t),t===n&&(e.scrollDom.style.webkitOverflowScrolling="touch",e.isScrollTo=!1)},o)},t.prototype.getStep=function(t,o,e,s,n){var i=o-t;if(0!==s&&0!==i)var l=(s=s||300)/(n=n||30),a=i/l,r=0,p=window.setInterval(function(){r<l-1?(t+=a,e&&e(t,p),r++):(e&&e(o,p),window.clearInterval(p))},n);else e&&e(o)},t.prototype.lazyLoad=function(t){var o=this,e=null!=t?t:o.optUp.lazyLoad.delay;return setTimeout(function(){for(var t=o.scrollDom.querySelectorAll("["+o.optUp.lazyLoad.attr+"]"),e=t.length,s=0;s<e;s++){var n=t[s];if("true"!==n.getAttribute(o.lazyTag)&&o.isInSee(n,o.optUp.lazyLoad.offset)){var i=n.getAttribute(o.optUp.lazyLoad.attr),l=new Image;l.onload=function(){var t=this.src,e=this.dom,s=o.optUp.lazyLoad.showClass;s&&e.classList.add(s),"IMG"===e.tagName?e.src=t:e.style.backgroundImage="url("+t+")",e.removeAttribute(o.optUp.lazyLoad.attr),e.removeAttribute(o.lazyTag)},l.onerror=function(){this.dom.removeAttribute(o.lazyTag)},l.onabort=function(){this.dom.removeAttribute(o.lazyTag)},l.src=i,n.setAttribute(o.lazyTag,"true"),l.dom=n}}},e)},t.prototype.isInSee=function(t,o){o=o||0;var e=this.getOffsetTop(t),s=this.getScrollTop()-o,n=e+t.offsetHeight,i=s+o+this.getClientHeight()+o;return e<i&&e>=s||n<=i&&n>s},t.prototype.getOffsetTop=function(t){for(var o=t.offsetTop,e=t.offsetParent;null!=e&&e!==this.scrollDom;)o+=e.offsetTop+e.clientTop,e=e.offsetParent;return o},t.prototype.getScrollHeight=function(){return this.scrollDom.scrollHeight},t.prototype.getClientHeight=function(){return this.isScrollBody&&"CSS1Compat"===document.compatMode?document.documentElement.clientHeight:this.scrollDom.clientHeight},t.prototype.getBodyHeight=function(){return document.body.clientHeight||document.documentElement.clientHeight},t.prototype.getScrollTop=function(){return this.isScrollBody?document.documentElement.scrollTop||document.body.scrollTop:this.scrollDom.scrollTop},t.prototype.getToBottom=function(){return this.getScrollHeight()-this.getClientHeight()-this.getScrollTop()},t.prototype.setScrollTop=function(t){"number"==typeof t&&(this.isScrollBody?(document.documentElement.scrollTop=t,document.body.scrollTop=t):this.scrollDom.scrollTop=t)},t.prototype.getDomById=function(t){var o;return t&&("string"==typeof t?o=document.getElementById(t):t.nodeType&&(o=t)),o},t.prototype.removeChild=function(t){if(t){var o=t.parentNode;o&&o.removeChild(t),t=null}},t.prototype.destroy=function(){var t=this;t.scrollDom.removeEventListener("touchstart",t.touchstartEvent),t.scrollDom.removeEventListener("touchmove",t.touchmoveEvent),t.scrollDom.removeEventListener("touchend",t.touchendEvent),t.scrollDom.removeEventListener("touchcancel",t.touchendEvent),t.scrollDom.removeEventListener("mousedown",t.touchstartEvent),t.scrollDom.removeEventListener("mousemove",t.touchmoveEvent),t.scrollDom.removeEventListener("mouseup",t.touchendEvent),t.scrollDom.removeEventListener("mouseleave",t.touchendEvent),t.removeChild(t.downwarp),t.isScrollBody?window.removeEventListener("scroll",t.scrollEvent):t.scrollDom.removeEventListener("scroll",t.scrollEvent),t.removeChild(t.upwarp),t.removeChild(t.toTopBtn),t.setBounce(!0)},t})?s.call(o,e,o,t):s)||(t.exports=n)}});