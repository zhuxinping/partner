webpackJsonp([43],{LTDR:function(e,t){},rcil:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});s("mvHQ");var o=s("X2Oc"),a=s("TXDt"),d=s("+aT9"),r=s.n(d),n=void 0,i=void 0,c=void 0,u=1,l={name:"open-map",components:{MHeader:a.a},data:function(){return{setX:"",setY:!0,baseInform:Object(o.m)("base"),jumpFlag:1}},beforeRouteEnter:function(e,t,s){window.scrollTo(0,0),e.meta.route=e.params.type,s()},mounted:function(){this.jumpFlag=~~this.$route.meta.route,r.a.plugin("AMap.Geocoder",function(){i=new r.a.Geocoder({})}),this.init()},methods:{handleClose:function(){this.jumpFlag?(Object(o.l)("mapAddress"),this.$router.push("/reportAdd")):this.$router.push("/updateBaseInform/10000")},init:function(){n=new r.a.Map("map",{zoom:16,resizeEnable:!0});var e=this;c=new r.a.Marker({draggable:!1,cursor:"move",raiseOnDrag:!0,title:"您当前位置"}),this.jumpFlag?dd.device.geolocation.get({targetAccuracy:100,coordinate:1,withReGeocode:!0,useCache:!1,onSuccess:function(t){n.setZoomAndCenter(16,[t.longitude,t.latitude]),n.add(c),""!==t.latitude&&""!==t.longitude||Object(o.g)("成功方法钉钉定位错误",t,{}),t.address?(e.setX=t.address,Object(o.m)("mapAddress",t.address)):i.getAddress([t.longitude,t.latitude],function(t,s){"complete"===t&&s.regeocode?(e.setX=s.regeocode.formattedAddress,void 0===e.setX&&(Object(o.g)("高德错误",s,{}),e.setX="获取当前位置失败，请点击这一行,重新获取！"),Object(o.m)("mapAddress",s.regeocode.formattedAddress)):Object(o.g)("高德错误",s,{})}),Object(o.m)("longitude",t.longitude),Object(o.m)("latitude",t.latitude)},onFail:function(t){Object(o.g)("失败方法钉钉定位错误",t,{}),4==~~t.errorCode||445==~~t.errorCode?(dd.device.notification.alert({message:"您已禁止授予钉钉 定位 权限，会造成该功能不可用，请到手机的 设置 里找到钉钉这个应用，并授予 定位 权限",title:"温馨提示",buttonName:"我知道了"}),e.setX="未开启定位权限！"):u<=3&&(u++,e.init())}}):(e.baseInform.longitude&&e.baseInform.latitude&&(n.setZoomAndCenter(16,[e.baseInform.longitude,e.baseInform.latitude]),c.setPosition([e.baseInform.longitude,e.baseInform.latitude]),n.add(c)),e.setX=e.baseInform.mapAddress),n.on("click",function(t){c.setPosition([t.lnglat.getLng(),t.lnglat.getLat()]),c.setMap(n),i.getAddress(t.lnglat,function(s,a){"complete"===s&&"OK"===a.info&&(Object(o.m)("mapAddress",a.regeocode.formattedAddress),Object(o.m)("longitude",t.lnglat.getLng()),Object(o.m)("latitude",t.lnglat.getLat()),e.setX=a.regeocode.formattedAddress)})})},sureAddress:function(){this.jumpFlag?this.$router.push("/reportAdd"):(this.baseInform.longitude=Object(o.m)("jd"),this.baseInform.latitude=Object(o.m)("weidu"),this.baseInform.mapAddress=Object(o.m)("mapAddress"),Object(o.m)("base",this.baseInform),this.$router.push("/updateBaseInform/10000"))}}},m={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"near"}},[o("m-header",{attrs:{headerTitle:"坐标"},on:{backClick:e.handleClose}}),e._v(" "),o("div",{attrs:{id:"map"}}),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"bottom"},[o("ul",[o("li",{staticClass:"up"},[o("img",{attrs:{src:s("IEjN"),alt:""}}),o("p",[e._v(e._s(e.setX))])]),e._v(" "),o("li",{staticClass:"down",on:{click:e.sureAddress}},[e._v("我选好了")])])])],1)},staticRenderFns:[]};var g=s("VU/8")(l,m,!1,function(e){s("LTDR")},"data-v-b3441230",null);t.default=g.exports}});