webpackJsonp([42],{"+UQM":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("X2Oc"),n=s("gyMJ"),o=s("36oi"),i=s("TXDt"),r={name:"payClass",components:{NoData:o.a,MHeader:i.a},data:function(){return{infoInform:Object(a.n)("infoInform"),schoolName:"",listDate:[],dateFlag:0,selectClassIndex:0,zeroList:[],oneList:[],twoList:[],maxLength:0,totalOrderAmount:0,studentNumber:1,studentPaymentRate:0,parentNumber:0}},beforeRouteEnter:function(t,e,s){t.meta.schoolName=t.params.schoolName,t.meta.schoolId=t.params.schoolId,s()},mounted:function(){this.schoolName=this.$route.meta.schoolName,this.getData(),Object(a.r)("09_04_school_info_payment_class","0")},methods:{handleClose:function(){this.$router.push({path:"/reportBaseInfrom/4/"+this.$route.meta.schoolId})},openSutdentReport:function(t,e){var s=this;this.selectClassIndex=e;var o={};o.classId=t,n.a.classPay(o,function(t){1e4===t.code?(s.dateFlag=1,s.parentNumber=t.body.parentNumber,s.studentNumber=t.body.studentNumber,s.studentPaymentRate=t.body.studentPaymentRate,s.totalOrderAmount=t.body.totalOrderAmount,s.zeroList=t.body.payList.studentNameList,s.oneList=t.body.noPayActList.studentNameList,s.twoList=t.body.noPayNoActList.studentNameList,s.maxLength=Math.max(s.zeroList.length,s.oneList.length,s.twoList.length)):(s.dateFlag=2,Object(a.g)("接口错误",t,o))})},getData:function(){var t=this,e={};e.schoolId=this.$route.meta.schoolId,n.a.getPayInfoClass(e,function(s){1e4===s.code?(t.dateFlag=1,t.listDate=s.body.classPayList,s.body&&s.body.classPayList&&t.openSutdentReport(s.body.classPayList[0].classId,0)):(t.dateFlag=2,Object(a.g)("接口错误",s,e))}).catch(function(e){t.dateFlag=2,Object(a.g)("catch错误",e,{})})}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container",style:2==t.dateFlag?"background:#fff":""},[s("div",{staticClass:"flex"},[s("m-header",{attrs:{headerTitle:t.schoolName},on:{backClick:t.handleClose}}),t._v(" "),s("span",{staticClass:"right-text"},[t._v("实时数据")]),t._v(" "),s("ul",{directives:[{name:"show",rawName:"v-show",value:1==t.dateFlag,expression:"dateFlag == 1?true:false"}],staticClass:"class-room"},t._l(t.listDate,function(e,a){return s("li",{key:a,staticClass:"class-room-li",on:{click:function(s){return t.openSutdentReport(e.classId,a)}}},[s("div",{staticClass:"class-room-text",class:t.selectClassIndex===a?"select-class":""},[s("span",{staticClass:"grade"},[t._v(t._s(e.gradeName))]),t._v(" "),s("span",{staticClass:"grade"},[t._v(t._s(e.className))])])])}),0),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.dateFlag,expression:"dateFlag == 1?true:false"}],staticClass:"student"},[s("p",{staticClass:"student-text"},[t._v("这学期本班订单金额"),s("em",[t._v(t._s(t._f("numThousand")(t._f("numFilter")(t.totalOrderAmount))))]),t._v("元，学生付费率"),s("em",[t._v(t._s(t._f("numFilter")(100*t.studentPaymentRate))+"%")]),t._v("，有"),s("em",[t._v(t._s(t._f("numThousand")(t.studentNumber)))]),t._v("个学生的"),s("em",[t._v(t._s(t._f("numThousand")(t.parentNumber)))]),t._v("个家长已付费")]),t._v(" "),s("span",{staticClass:"eg"},[t._v("* 数据示例：贝贝(2/5)  贝贝有5个家长，其中2个家长已付费")]),t._v(" "),s("ul",{staticClass:"header_student"},[s("li",[s("span",[t._v("已付费")]),s("span",[t._v(t._s(t.zeroList.length)+"人")])]),t._v(" "),s("li",[s("span",[t._v("未付费 已激活")]),s("span",[t._v(t._s(t.oneList.length)+"人")])]),t._v(" "),s("li",[s("span",[t._v("未付费 未激活")]),s("span",[t._v(t._s(t.twoList.length)+"人")])])])])],1),t._v(" "),s("div",{staticClass:"main",style:2==t.dateFlag?"background:#fff":""},[s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.dateFlag,expression:"dateFlag == 1?true:false"}],staticClass:"student_data"},[s("div",{staticClass:"student_outer"},[s("ul",{staticClass:"tbody_student"},[0!==t.maxLength?s("li",t._l(t.maxLength,function(e){return s("div",{key:e},[s("span",[t._v(t._s(t.zeroList[e-1]?t.zeroList[e-1].name:""))]),t.zeroList.length&&t.zeroList[e-1]?s("em",[t._v("("+t._s(t.zeroList[e-1].parentPaidNumber?t.zeroList[e-1].parentPaidNumber:0)+"/"+t._s(t.zeroList[e-1].parentNumber?t.zeroList[e-1].parentNumber:0)+")")]):t._e()])}),0):t._e(),t._v(" "),0!==t.maxLength?s("li",t._l(t.maxLength,function(e){return s("div",{key:e},[s("span",[t._v(t._s(t.oneList.length&&t.oneList[e-1]?t.oneList[e-1].name:""))]),t.oneList.length&&t.oneList[e-1]?s("em",[t._v("("+t._s(t.oneList.length&&t.oneList[e-1].parentPaidNumber?t.oneList.length&&t.oneList[e-1].parentPaidNumber:0)+"/"+t._s(t.oneList.length&&t.oneList[e-1].parentNumber?t.oneList.length&&t.oneList[e-1].parentNumber:0)+")")]):t._e()])}),0):t._e(),t._v(" "),0!==t.maxLength?s("li",t._l(t.maxLength,function(e){return s("div",{key:e},[s("span",[t._v(t._s(t.twoList.length&&t.twoList[e-1]?t.twoList[e-1].name:""))]),t.twoList.length&&t.twoList[e-1]?s("em",[t._v("("+t._s(t.twoList.length&&t.twoList[e-1].parentPaidNumber?t.twoList[e-1].parentPaidNumber:0)+"/"+t._s(t.twoList.length&&t.twoList[e-1].parentNumber?t.twoList[e-1].parentNumber:0)+")")]):t._e()])}),0):t._e()])])]),t._v(" "),s("no-data",{attrs:{operation:2==t.dateFlag}})],1)])},staticRenderFns:[]};var d=s("VU/8")(r,l,!1,function(t){s("Dwhv")},"data-v-ca4d2272",null);e.default=d.exports},Dwhv:function(t,e){}});