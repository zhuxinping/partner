webpackJsonp([27],{VUqH:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("gyMJ"),n=a("X2Oc"),s=a("7+uW"),r=(a("miEh"),a("p/TY")),o=a.n(r);s.default.component(o.a.name,o.a);var l={name:"playTable",props:{playObject:{}},data:function(){return this.chartSettings={axisSite:{right:["学生付费率"]},yAxisType:["","percent"],showLine:["学生付费率"],stack:{"产品":["视频产品","签到产品"]},series:[{name:"视频产品",type:"bar",stack:"产品",barMaxWidth:"50"},{name:"签到产品",type:"bar",stack:"产品",barMaxWidth:"50"}]},this.chartExtend={grid:{left:"0%",right:"1%",bottom:"40%",top:"5%",containLabel:!0},tooltip:{textStyle:{align:"left"},formatter:function(t){var e="",a=void 0,i=void 0;return t.forEach(function(t){"学生付费率"===t.seriesName?(a=t.seriesName+Object(n.o)(100*t.value)+"%",i=t.marker):(a=t.seriesName+Object(n.p)(Object(n.o)(t.value)),i=t.marker),e=e+i+a+"</br>"}),e}},color:["#FBB534","#7ED321","#00AAFF "],title:{left:50,bottom:40,text:"",textStyle:{fontSize:10,color:"#BBBBBD"}},legend:{bottom:130,left:80,itemWidth:12,itemHeight:12,selectedMode:!1,data:[{name:"视频产品",textStyle:{fontSize:10,color:"#bbbbbd"},icon:"roundRect"},{name:"签到产品",textStyle:{fontSize:10,color:"#bbbbbd"},icon:"roundRect"},{name:"学生付费率",textStyle:{fontSize:10,color:"#bbbbbd"},icon:"roundRect"}]},xAxis:{type:"category",axisLine:{show:!0,interval:0,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,textStyle:{fontSize:10,color:"#bbbbbd"}}},yAxis:{axisLine:{show:!1,lineStyle:{color:"#bbbbbd",type:"solid"}},splitLine:{show:!0,lineStyle:{color:"#eee",type:"dashed"}},splitNumber:5},dataZoom:[{startValue:0,endValue:4,type:"slider",show:!1,zoomLock:!0},{type:"inside",show:!0,zoomLock:!0,xAxisIndex:[0],startValue:0,endValue:4,preventDefaultMouseMove:!1}],series:{barWidth:20}},{jumpUrl:"",chartData:{columns:["日期","视频产品","签到产品","学生付费率"],rows:[]},operation:!1}},mounted:function(){this.getDate(),this.getClass(),Object(n.r)("09_04_school_info_payment","0")},methods:{getDate:function(){var t=this;i.a.getStrategy({},function(e){e.flag&&(t.jumpUrl=e.data)})},getClass:function(){var t=this,e={};e.schoolId=this.$route.meta.schoolId,i.a.getPayInfoBar(e,function(e){e.code&&e.body.flagData?e.body.classPayList.forEach(function(e,a){e.gradeName&&e.gradeName.length>5&&(e.gradeName=e.gradeName.substr(0,4)),e.className&&e.className.length>5&&(e.className=e.className.substr(0,4));var i={"日期":e.gradeName+"\n"+e.className,"视频产品":e.videoOrderAmount,"签到产品":e.signInOrderAmount,"学生付费率":e.studentPaymentRate};t.$set(t.chartData.rows,a,i)}):t.operation=!0})},seeActiveReport:function(){Object(n.r)("09_04_linkto_info","1"),Object(n.k)(this.jumpUrl)},searchClass:function(){this.$router.push({path:"/payClass/"+this.$parent.baseInfo.schoolName+"/"+this.$route.meta.schoolId})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"grid-container"},[a("table",{staticClass:"spr-grid"},[t._m(0),t._v(" "),a("tr",[a("td",{staticClass:"cur"},[t._v("ARPU值")]),t._v(" "),a("td",{staticClass:"active"},[t._v(t._s(t._f("numThousand")(t._f("numFilter")(t.playObject&&t.playObject.lastSem.arpu))))]),t._v(" "),a("td",{staticClass:"month_active"},[t._v(t._s(t._f("numThousand")(t._f("numFilter")(t.playObject&&t.playObject.currSem.arpu)))+" "),a("i",{staticClass:"icon-down",class:t.playObject&&1==t.playObject.sequential.arpuSeq?"icon-up":"icon-down",style:t.playObject&&3==t.playObject.sequential.arpuSeq?"display:none":""})])]),t._v(" "),a("tr",[a("td",{staticClass:"cur"},[t._v("订单金额")]),t._v(" "),a("td",{staticClass:"active"},[t._v(t._s(t._f("numThousand")(t._f("numFilter")(t.playObject&&t.playObject.lastSem.orderAmount))))]),t._v(" "),a("td",{staticClass:"month_active"},[t._v(t._s(t._f("numThousand")(t._f("numFilter")(t.playObject&&t.playObject.currSem.orderAmount)))+" "),a("i",{staticClass:"icon-down",class:t.playObject&&1==t.playObject.sequential.orderAmountSeq?"icon-up":"icon-down",style:t.playObject&&3==t.playObject.sequential.orderAmountSeq?"display:none":""})])]),t._v(" "),a("tr",[a("td",{staticClass:"cur"},[t._v("学生付费率")]),t._v(" "),a("td",{staticClass:"active"},[t._v(t._s(t._f("numFilter")(t.playObject&&100*t.playObject.lastSem.stuPayRate))+"%")]),t._v(" "),a("td",{staticClass:"month_active"},[t._v(t._s(t._f("numFilter")(t.playObject&&100*t.playObject.currSem.stuPayRate))+"% "),a("i",{staticClass:"icon-down",class:t.playObject&&1==t.playObject.sequential.stuPayRateSeq?"icon-up":"icon-down",style:t.playObject&&3==t.playObject.sequential.stuPayRateSeq?"display:none":""})])])])]),t._v(" "),a("div",{staticClass:"play-bar"},[a("div",{staticClass:"play-class"},[a("span",[t._v("本学期各个班级的付费概况")]),t._v(" "),t.operation?t._e():a("span",{on:{click:t.searchClass}},[t._v("查看详情"),a("i",{staticClass:"icon-arrow"})])]),t._v(" "),t.operation?t._e():a("div",{staticStyle:{width:"100%",height:"270px"}},[a("ve-histogram",{attrs:{data:t.chartData,settings:t.chartSettings,extend:t.chartExtend}})],1),t._v(" "),t.operation?a("dl",{staticClass:"no-number"},[a("dd"),t._v(" "),a("dt",[t._v("暂无数据")])]):t._e(),t._v(" "),a("div",{staticClass:"active-link",on:{click:t.seeActiveReport}},[t._v("看《开视频园三板斧》，助您收入翻倍"),a("i",{staticClass:"icon-right"})])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("th",{staticClass:"line"}),this._v(" "),e("th",{staticClass:"active"},[this._v("上学期")]),this._v(" "),e("th",[this._v("本学期")])])}]};var u=a("VU/8")(l,c,!1,function(t){a("vqRf")},"data-v-75b7fd2d",null);e.default=u.exports},"p/TY":function(t,e,a){"use strict";var i=a("CR8g"),n=a("QHuJ"),s=a("s9il");a("GbHy");var r,o=(r=a("1KFz"))&&"object"==typeof r&&"default"in r?r.default:r,l=function(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t},c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},u=.5;function d(t){var e=t.innerRows,a=t.dimAxisName,i=t.dimension,n=t.axisVisible,s=t.dimAxisType,r=t.dims;return i.map(function(t){return{type:"category",name:a,nameLocation:"middle",nameGap:22,data:"value"===s?function(t){for(var e=Math.max.apply(null,t),a=[],i=Math.min.apply(null,t);i<=e;i++)a.push(i);return a}(r):e.map(function(e){return e[t]}),axisLabel:{formatter:function(t){return String(t)}},show:n}})}function m(t){var e,a=t.innerRows,i=t.metrics,r=t.stack,o=t.axisSite,c=t.isHistogram,d=t.labelMap,m=t.itemStyle,p=t.label,b=t.showLine,v=void 0===b?[]:b,y=t.dimAxisType,f=t.barGap,h=t.opacity,x=t.dims,g={},_=c?o.right||[]:o.top||[],O=c?"yAxisIndex":"xAxisIndex",S=r&&n.getStackMap(r);return i.forEach(function(t){g[t]=[]}),a.forEach(function(t){i.forEach(function(e){g[e].push(t[e])})}),!!(e=Object.keys(g).map(function(t,e){var a="value"===y?function(t,e){for(var a=Math.max.apply(null,e),i=[],n=Math.min.apply(null,e);n<=a;n++){var s=e.indexOf(n);~s?i.push(t[s]):i.push(null)}return i}(g[t],x):g[t],i=l({name:null!=d[t]?d[t]:t,type:~v.indexOf(t)?"line":"bar",data:a},O,~_.indexOf(t)?"1":"0");r&&S[t]&&(i.stack=S[t]),p&&(i.label=p),m&&(i.itemStyle=m);var n=h||s.get(i,"itemStyle.normal.opacity");return"value"===y&&(i.barGap=f,i.barCategoryGap="1%",null==n&&(n=u)),null!=n&&s.set(i,"itemStyle.normal.opacity",n),i})).length&&e}var p=function(t,e,a,r){var o=s.cloneDeep(e),l=a.axisSite,u=void 0===l?{}:l,p=a.dimension,b=void 0===p?[t[0]]:p,v=a.stack,y=void 0===v?{}:v,f=a.axisVisible,h=void 0===f||f,x=a.digit,g=void 0===x?2:x,_=a.dataOrder,O=void 0!==_&&_,S=a.scale,j=void 0===S?[!1,!1]:S,A=a.min,w=void 0===A?[null,null]:A,C=a.max,N=void 0===C?[null,null]:C,k=a.labelMap,M=void 0===k?{}:k,R=a.legendName,T=void 0===R?{}:R,q=a.label,L=a.itemStyle,V=a.showLine,F=a.barGap,E=void 0===F?"-100%":F,P=a.opacity;if(O){var D=O.label,H=O.order;D&&H&&o.sort(function(t,e){return"desc"===H?t[D]-e[D]:e[D]-t[D]})}var I=r.tooltipVisible,z=r.legendVisible,B=t.slice();u.left&&u.right?B=u.left.concat(u.right):u.left&&!u.right?B=u.left:a.metrics?B=a.metrics:B.splice(t.indexOf(b[0]),1);var G=a.yAxisType||["normal","normal"],$=a.xAxisType||"category",U=a.yAxisName||[],W=a.xAxisName||"",J=function(t,e){return t.map(function(t){return t[e[0]]})}(o,b),Y=z&&function(t){var e=t.metrics,a=t.labelMap,i=t.legendName;return i||a?{data:a?e.map(function(t){return null==a[t]?t:a[t]}):e,formatter:function(t){return null!=i[t]?i[t]:t}}:{data:e}}({metrics:B,labelMap:M,legendName:T}),K=d({innerRows:o,dimAxisName:W,dimension:b,axisVisible:h,dimAxisType:$,dims:J});return{legend:Y,yAxis:function(t){for(var e=t.meaAxisName,a=t.meaAxisType,i=t.axisVisible,s=t.digit,r=t.scale,o=t.min,l=t.max,u={type:"value",axisTick:{show:!1},show:i},d=[],m=function(t){a[t]?d[t]=c({},u,{axisLabel:{formatter:function(e){return n.getFormated(e,a[t],s)}}}):d[t]=c({},u),d[t].name=e[t]||"",d[t].scale=r[t]||!1,d[t].min=o[t]||null,d[t].max=l[t]||null},p=0;p<2;p++)m(p);return d}({meaAxisName:U,meaAxisType:G,axisVisible:h,digit:g,scale:j,min:w,max:N}),series:m({innerRows:o,metrics:B,stack:y,axisSite:u,isHistogram:!0,labelMap:M,itemStyle:L,label:q,showLine:V,dimAxisType:$,dimension:b,barGap:E,opacity:P,dims:J}),xAxis:K,tooltip:I&&function(t){var e=t.axisSite,a=t.isHistogram,s=t.meaAxisType,r=t.digit,o=t.labelMap,l=a?e.right||[]:e.top||[];return o&&(l=l.map(function(t){return void 0===o[t]?t:o[t]})),{trigger:"axis",formatter:function(t){var e=[];return e.push(t[0].name+"<br>"),t.forEach(function(t){var a=t.seriesName,o=~l.indexOf(a)?s[1]:s[0];e.push(i.itemPoint(t.color)),e.push(a+": "),e.push(n.getFormated(t.value,o,r)),e.push("<br>")}),e.join("")}}}({axisSite:u,isHistogram:!0,meaAxisType:G,digit:g,labelMap:M})}},b=c({},o,{name:"VeHistogram",data:function(){return this.chartHandler=p,{}}});t.exports=b},vqRf:function(t,e){}});