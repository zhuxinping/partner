webpackJsonp([56],{"36zG":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("X2Oc"),n=s("gyMJ"),o=s("36oi"),i=s("TXDt"),r={name:"activeClassRoom",components:{NoData:o.a,MHeader:i.a},data:function(){return{infoInform:Object(a.n)("infoInform")?Object(a.n)("infoInform"):"",schoolName:"",listDate:[],dateFlag:0,selectClassIndex:0,zeroList:[],oneList:[],twoList:[],threeList:[],fourList:[],maxLength:0,average:0,rank:0,haveStudent:0,difference:0}},beforeRouteEnter:function(t,e,s){t.meta.schoolName=t.params.schoolName,t.meta.schoolId=t.params.schoolId,t.meta.radio=t.params.radio,s()},mounted:function(){this.schoolName=this.$route.meta.schoolName,this.getData(),Object(a.r)("09_02_activation_ratio_class","0")},methods:{handleClose:function(){this.$router.push({path:"/reportBaseInfrom/2/"+this.$route.meta.schoolId})},openSutdentReport:function(t,e){var s=this;this.selectClassIndex=e;var o=this,i={};i.classId=t,i.schoolId=this.$route.meta.schoolId,n.a.getStudentActivationRatio(i,function(t){0!==t.body.length?1e4===t.code?(o.dateFlag=1,t.body&&(s.average=t.body.dataValue,s.rank=t.body.rank,s.haveStudent=t.body.haveStudent,s.difference=t.body.difference,s.zeroList=t.body.zeroList,s.oneList=t.body.oneList,s.twoList=t.body.twoList,s.threeList=t.body.threeList,s.fourList=t.body.fourList,s.maxLength=Math.max(s.zeroList.length,s.oneList.length,s.twoList.length,s.threeList.length,s.fourList.length))):(o.dateFlag=2,Object(a.g)("接口错误",t,i)):o.dateFlag=2})},getData:function(){var t=this,e={};e.schoolId=this.$route.meta.schoolId,e.parentsActivationRatio=this.$route.meta.radio,n.a.getClassActivationRatio(e,function(s){0!==s.body.length?1e4===s.code?(t.dateFlag=1,t.listDate=s.body,s.body&&t.openSutdentReport(s.body[0].classId,0)):(t.dateFlag=2,Object(a.g)("接口错误",s,e)):t.dateFlag=2})}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container",style:2==t.dateFlag?"background:#fff":""},[s("div",{staticClass:"flex"},[s("m-header",{attrs:{headerTitle:t.schoolName},on:{backClick:t.handleClose}}),t._v(" "),s("ul",{directives:[{name:"show",rawName:"v-show",value:1==t.dateFlag,expression:"dateFlag == 1?true:false"}],staticClass:"class-room"},t._l(t.listDate,function(e,a){return s("li",{key:a,staticClass:"class-room-li",on:{click:function(s){return t.openSutdentReport(e.classId,a)}}},[s("div",{staticClass:"class-room-text",style:e.type?1==e.type?"background: #FFE7D8;color: #8E5431":2==e.type?"background:#E1F2FA;color: #297391":"background: #E2F8E2;color: #307E30":"background:#FFE7E7;color:#614646"},[s("span",{staticClass:"grade"},[t._v(t._s(e.gradeName))]),t._v(" "),s("span",{staticClass:"grade"},[t._v(t._s(e.className))])]),t._v(" "),s("i",{class:t.selectClassIndex===a?"select-class":""})])}),0),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.dateFlag,expression:"dateFlag == 1?true:false"}],staticClass:"student"},[1==t.haveStudent?s("p",{staticClass:"student-text"},[t._v("本班级还没有学生，快去学生管理添加吧")]):0==t.haveStudent&&1==t.rank?s("p",{staticClass:"student-text"},[t._v("本班学生平均有"),s("em",[t._v(t._s(t._f("numFilter")(t.average)))]),t._v("个家长关注，目前全校排名第"),s("em",[t._v(t._s(t._f("numThousand")(t.rank)))]),t._v("，第2名只需要再激活"),s("em",[t._v(t._s(t._f("numThousand")(t.difference)))]),t._v("名家长就能够反超了。")]):s("p",{staticClass:"student-text"},[t._v("本班学生平均有"),s("em",[t._v(t._s(t._f("numFilter")(t.average)))]),t._v("个家长关注，目前全校排名第"),s("em",[t._v(t._s(t._f("numThousand")(t.rank)))]),t._v("，还需要"),s("em",[t._v(t._s(t._f("numThousand")(t.difference)))]),t._v("名家长激活就能够超过上一名了。")]),t._v(" "),s("ul",{staticClass:"header-student"},[s("li",[s("span"),t._v("灰色"),s("br"),t._v(t._s(t.zeroList.length)+"人")]),t._v(" "),s("li",[s("span"),t._v("红色"),s("br"),t._v(t._s(t.oneList.length)+"人")]),t._v(" "),s("li",[s("span"),t._v("橙色"),s("br"),t._v(t._s(t.twoList.length)+"人")]),t._v(" "),s("li",[s("span"),t._v("蓝色"),s("br"),t._v(t._s(t.threeList.length)+"人")]),t._v(" "),s("li",[s("span"),t._v("绿色"),s("br"),t._v(t._s(t.fourList.length)+"人")])])])],1),t._v(" "),s("div",{staticClass:"main"},[s("div",{staticClass:"class-list"},[s("ul",{directives:[{name:"show",rawName:"v-show",value:1==t.dateFlag,expression:"dateFlag == 1?true:false"}],staticClass:"tbody-student"},[s("li",t._l(t.maxLength,function(e){return s("span",{key:e},[t._v(t._s(t.zeroList[e-1]?t.zeroList[e-1].studentName:""))])}),0),t._v(" "),s("li",t._l(t.maxLength,function(e){return s("span",{key:e},[t._v(t._s(t.oneList[e-1]?t.oneList[e-1].studentName:""))])}),0),t._v(" "),s("li",t._l(t.maxLength,function(e){return s("span",{key:e},[t._v(t._s(t.twoList[e-1]?t.twoList[e-1].studentName:""))])}),0),t._v(" "),s("li",t._l(t.maxLength,function(e){return s("span",{key:e},[t._v(t._s(t.threeList[e-1]?t.threeList[e-1].studentName:""))])}),0),t._v(" "),s("li",t._l(t.maxLength,function(e){return s("span",{key:e},[t._v(t._s(t.fourList[e-1]?t.fourList[e-1].studentName:""))])}),0)]),t._v(" "),t._m(0)])]),t._v(" "),s("no-data",{attrs:{operation:2==t.dateFlag}})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"student-tongji header-student"},[s("li",[s("span"),t._v("未激活的学生")]),t._v(" "),s("li",[s("span"),t._v("激活1个家长")]),t._v(" "),s("li",[s("span"),t._v("激活2个家长")]),t._v(" "),s("li",[s("span"),t._v("激活3个家长")]),t._v(" "),s("li",[s("span"),t._v("激活4个及以上家长")])])}]};var d=s("VU/8")(r,l,!1,function(t){s("YWTx")},"data-v-2d0767b1",null);e.default=d.exports},YWTx:function(t,e){}});