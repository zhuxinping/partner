webpackJsonp([3,6,39],{"+K1w":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"activeTable",props:{tableData:{type:Object}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"grid-container"},[a("table",{staticClass:"spr-grid"},[t._m(0),t._v(" "),a("tr",[a("td",{staticClass:"cur"},[t._v("学生")]),t._v(" "),a("td",{staticClass:"active"},[t._v(t._s(t._f("numThousand")(t.tableData.onReadStudentTotal)))]),t._v(" "),a("td",[t._v(t._s(t._f("numThousand")(t.tableData.activeStudentTotal)))]),t._v(" "),a("td",{class:2===t.tableData.isStandard?"active_red":""},[t._v(t._s(t.tableData.onReadStudentActivationRatio))])]),t._v(" "),a("tr",[a("td",{staticClass:"cur"},[t._v("家长")]),t._v(" "),a("td",{staticClass:"active"},[t._v(t._s(t._f("numThousand")(t.tableData.onReadParentTotal)))]),t._v(" "),a("td",[t._v(t._s(t._f("numThousand")(t.tableData.activeParentTotal)))]),t._v(" "),a("td",[t._v(t._s(t.tableData.onReadParentActivationRatio))])]),t._v(" "),a("tr",[a("td",{staticClass:"cur"},[t._v("园丁")]),t._v(" "),a("td",{staticClass:"active"},[t._v(t._s(t._f("numThousand")(t.tableData.onReadTeacherTotal)))]),t._v(" "),a("td",[t._v(t._s(t._f("numThousand")(t.tableData.activeTeacherTotal)))]),t._v(" "),a("td",[t._v(t._s(t.tableData.onReadTeacherActivationRatio))])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",{staticClass:"line"}),t._v(" "),a("th",{staticClass:"active"},[t._v("在读数/在职数")]),t._v(" "),a("th",[t._v("在读/在职"),a("br"),t._v("激活数")]),t._v(" "),a("th",[t._v("在读/在职"),a("br"),t._v("激活率")])])}]};var o=a("VU/8")(i,n,!1,function(t){a("562o")},"data-v-f6a3851a",null);e.default=o.exports},"5/bM":function(t,e,a){var i=a("Icdr");a("eQYg"),a("h4VJ");var n=a("ri8f"),o=a("UOrf"),s=a("l4Op");i.registerVisual(n("funnel")),i.registerLayout(o),i.registerProcessor(s("funnel"))},"562o":function(t,e){},FbWu:function(t,e,a){"use strict";var i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"active-ratio"},[a("div",{staticClass:"grid"},[a("transition",{attrs:{name:"fold-fade",appear:""}},[a("div",{staticClass:"export"},[t.rangeExportOne?a("span",{ref:"exportRed",staticClass:"red"},[t.showExportLabelOne?a("em",[t._v(t._s(t._f("numFilter")(t.exportRatio)))]):t._e()]):t._e(),t._v(" "),t.rangeExportTwo?a("span",{ref:"exportYellow",staticClass:"yellow"},[t.showExportLabelTwo?a("em",[t._v(t._s(t._f("numFilter")(t.exportRatio)))]):t._e()]):t._e(),t._v(" "),t.rangeExportThree?a("span",{ref:"exportBlue",staticClass:"blue"},[t.showExportLabelThree?a("em",[t._v(t._s(t._f("numFilter")(t.exportRatio)))]):t._e()]):t._e()])]),t._v(" "),a("transition",{attrs:{name:"fold-faded",appear:""}},[a("div",{staticClass:"activate"},[t.rangeActivationOne?a("span",{ref:"activateRed",staticClass:"red"},[t.showActivationLabelOne?a("em",[t._v(t._s(t._f("numFilter")(t.activationRatio)))]):t._e()]):t._e(),t._v(" "),t.rangeActivationTwo?a("span",{ref:"activateYellow",staticClass:"yellow"},[t.showActivationLabelTwo?a("em",[t._v(t._s(t._f("numFilter")(t.activationRatio)))]):t._e()]):t._e(),t._v(" "),t.rangeActivationThree?a("span",{ref:"activateBlue",staticClass:"blue"},[t.showActivationLabelThree?a("em",[t._v(t._s(t._f("numFilter")(t.activationRatio)))]):t._e()]):t._e()])]),t._v(" "),a("i",{staticClass:"zero",class:{active:0===t.targetValue}},[t._v("0")]),t._v(" "),a("i",{staticClass:"one",class:{active:1===t.targetValue}},[t._v("1")]),t._v(" "),a("i",{staticClass:"two",class:{active:2===t.targetValue}},[t._v("2")]),t._v(" "),a("i",{staticClass:"three",class:{active:3===t.targetValue}},[t._v("3")]),t._v(" "),a("i",{staticClass:"four",class:{active:4===t.targetValue}},[t._v("4")]),t._v(" "),a("i",{staticClass:"five",class:{active:5===t.targetValue}},[t._v("5")]),t._v(" "),a("i",{staticClass:"six",class:{active:6===t.targetValue}},[t._v("6")]),t._v(" "),a("em",{ref:"targetRef",staticClass:"target"})],1)])},staticRenderFns:[]};var n=a("VU/8")({name:"activeBar",props:{exportRatio:null,activationRatio:null,targetValue:null},data:function(){return{rangeExportOne:!1,rangeExportTwo:!1,rangeExportThree:!1,showExportLabelOne:!1,showExportLabelTwo:!1,showExportLabelThree:!1,rangeActivationOne:!1,rangeActivationTwo:!1,rangeActivationThree:!1,showActivationLabelOne:!1,showActivationLabelTwo:!1,showActivationLabelThree:!1}},watch:{exportRatio:{handler:function(t,e){this.exportRatio=t,this.showExportRatio()},immediate:!0},activationRatio:{handler:function(t,e){this.activationRatio=t,this.showActivationRatio()},immediate:!0},targetValue:{handler:function(t,e){var a=this;this.targetValue=t,this.showExportRatio(),this.showActivationRatio(),this.$nextTick(function(){t>0&&t<=1?a.$refs.targetRef.style.left=95*t/75+"rem":t>1&&t<=2?a.$refs.targetRef.style.left=95*(t-1)/75+95/75+"rem":t>2&&t<=3?a.$refs.targetRef.style.left=95*(t-2)/75+190/75+"rem":t>3&&t<=4?a.$refs.targetRef.style.left=95*(t-3)/75+3.8+"rem":t>4&&t<=5?a.$refs.targetRef.style.left=95*(t-4)/75+380/75+"rem":t>5&&t<=6?a.$refs.targetRef.style.left=95*(t-5)/75+475/75+"rem":t>6&&(a.$refs.targetRef.style.left="7.6rem")})},immediate:!0}},methods:{showExportRatio:function(){var t=this;this.exportRatio>=0&&this.exportRatio<2&&null!==this.exportRatio?(this.rangeExportOne=!0,this.showExportLabelOne=!0,this.$nextTick(function(){t.$refs.exportRed.style.width=95*t.exportRatio/75+"rem"})):this.exportRatio>=2&&this.exportRatio<4?(this.rangeExportOne=!0,this.rangeExportTwo=!0,this.showExportLabelTwo=!0,this.$nextTick(function(){t.$refs.exportRed.style.background="#F9CE98",t.$refs.exportYellow.style.width=95*(t.exportRatio-2)/75+"rem"})):this.exportRatio>=4&&this.exportRatio<=6?(this.rangeExportOne=!0,this.rangeExportTwo=!0,this.rangeExportThree=!0,this.showExportLabelOne=!1,this.showExportLabelTwo=!1,this.showExportLabelThree=!0,this.$nextTick(function(){t.$refs.exportRed.style.background="#98d0f9",t.$refs.exportYellow.style.background="#98d0f9",t.$refs.exportBlue.style.width=95*(t.exportRatio-4)/75+"rem"})):this.exportRatio>6&&(this.rangeExportOne=!0,this.rangeExportTwo=!0,this.rangeExportThree=!0,this.showExportLabelOne=!1,this.showExportLabelTwo=!1,this.showExportLabelThree=!0,this.$nextTick(function(){t.$refs.exportRed.style.background="#98d0f9",t.$refs.exportYellow.style.background="#98d0f9",t.$refs.exportBlue.style.width=95*(t.exportRatio-4)/75+"rem"}))},showActivationRatio:function(){var t=this;this.activationRatio>=0&&this.activationRatio<2&&null!==this.exportRatio?(this.rangeActivationOne=!0,this.showActivationLabelOne=!0,this.showActivationLabelTwo=!1,this.showActivationLabelThree=!1,this.$nextTick(function(){t.$refs.activateRed.style.width=95*t.activationRatio/75+"rem"})):this.activationRatio>=2&&this.activationRatio<4?(this.rangeActivationOne=!0,this.rangeActivationTwo=!0,this.showActivationLabelOne=!1,this.showActivationLabelTwo=!0,this.showActivationLabelThree=!1,this.$nextTick(function(){t.$refs.activateRed.style.background="#F9CE98",t.$refs.activateYellow.style.width=95*(t.activationRatio-2)/75+"rem"})):this.activationRatio>=4&&this.activationRatio<=6?(this.rangeActivationOne=!0,this.rangeActivationTwo=!0,this.rangeActivationThree=!0,this.showActivationLabelOne=!1,this.showActivationLabelTwo=!1,this.showActivationLabelThree=!0,this.$nextTick(function(){t.$refs.activateRed.style.background="#98d0f9",t.$refs.activateYellow.style.background="#98d0f9",t.$refs.activateBlue.style.width=95*(t.activationRatio-4)/75+"rem"})):this.activationRatio>6&&(this.rangeActivationOne=!0,this.rangeActivationTwo=!0,this.rangeActivationThree=!0,this.showActivationLabelOne=!1,this.showActivationLabelTwo=!1,this.showActivationLabelThree=!0,this.$nextTick(function(){t.$refs.activateRed.style.background="#98d0f9",t.$refs.activateYellow.style.background="#98d0f9",t.$refs.activateBlue.style.width=95*(t.activationRatio-4)/75+"rem"}))}}},i,!1,function(t){a("gULd")},"data-v-3c35a276",null);e.a=n.exports},LtjE:function(t,e){},P7ry:function(t,e,a){a("80cc"),a("dp0Z"),a("wLWv"),a("R0U9")},R0U9:function(t,e,a){a("Icdr").registerAction("legendScroll","legendscroll",function(t,e){var a=t.scrollDataIndex;null!=a&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},function(t){t.setScrollDataIndex(a)})})},UOrf:function(t,e,a){var i=a("1Xuh"),n=a("wWR3"),o=n.parsePercent,s=n.linearMap;t.exports=function(t,e,a){t.eachSeriesByType("funnel",function(t){var a=t.getData(),n=a.mapDimension("value"),r=t.get("sort"),l=function(t,e){return i.getLayoutRect(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,e),c=function(t,e){for(var a=t.mapDimension("value"),i=t.mapArray(a,function(t){return t}),n=[],o="ascending"===e,s=0,r=t.count();s<r;s++)n[s]=s;return"function"==typeof e?n.sort(e):"none"!==e&&n.sort(function(t,e){return o?i[t]-i[e]:i[e]-i[t]}),n}(a,r),d=[o(t.get("minSize"),l.width),o(t.get("maxSize"),l.width)],u=a.getDataExtent(n),h=t.get("min"),v=t.get("max");null==h&&(h=Math.min(u[0],0)),null==v&&(v=u[1]);var p=t.get("funnelAlign"),g=t.get("gap"),f=(l.height-g*(a.count()-1))/a.count(),b=l.y,m=function(t,e){var i,o=a.get(n,t)||0,r=s(o,[h,v],d,!0);switch(p){case"left":i=l.x;break;case"center":i=l.x+(l.width-r)/2;break;case"right":i=l.x+l.width-r}return[[i,e],[i+r,e]]};"ascending"===r&&(f=-f,g=-g,b+=l.height,c=c.reverse());for(var _=0;_<c.length;_++){var x=c[_],y=c[_+1],w=a.getItemModel(x).get("itemStyle.height");null==w?w=f:(w=o(w,l.height),"ascending"===r&&(w=-w));var R=m(x,b),T=m(y,b+w);b+=w+g,a.setItemLayout(x,{points:R.concat(T.slice().reverse())})}!function(t){t.each(function(e){var a,i,n,o,s=t.getItemModel(e),r=s.getModel("label").get("position"),l=s.getModel("labelLine"),c=t.getItemLayout(e),d=c.points,u="inner"===r||"inside"===r||"center"===r;if(u)a="center",o=[[i=(d[0][0]+d[1][0]+d[2][0]+d[3][0])/4,n=(d[0][1]+d[1][1]+d[2][1]+d[3][1])/4],[i,n]];else{var h,v,p,g=l.get("length");"left"===r?(h=(d[3][0]+d[0][0])/2,v=(d[3][1]+d[0][1])/2,i=(p=h-g)-5,a="right"):(h=(d[1][0]+d[2][0])/2,v=(d[1][1]+d[2][1])/2,i=(p=h+g)+5,a="left"),o=[[h,v],[p,v]],n=v}c.label={linePoints:o,x:i,y:n,verticalAlign:"middle",textAlign:a,inside:u}})}(a)})}},"W+EF":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),n=a.n(i),o=a("TXDt"),s=a("FbWu"),r=a("+K1w"),l=a("djen"),c=a("PPs4"),d=a("gyMJ"),u=a("36oi"),h=a("X2Oc"),v=(a("miEh"),{name:"activeAnalyzing",components:{MHeader:o.a,ActiveBar:s.a,activeTable:r.default,activeFunnel:l.default,dialogModal:c.a,NoData:u.a},data:function(){return{actionCode:n()(Object(h.n)("actionCode")),activationRatio:null,exportRatio:null,flagData:!1,showData:!1,loading:!0,targetValue:4,targetStr:"",showColor:!1,infoInform:Object(h.n)("infoInform")?Object(h.n)("infoInform"):"",showAlertFlag:!1,activeRatio:!1,activeFlag:!1,dateYesterday:"",tableData:{onReadStudentTotal:0,activeStudentTotal:0,onReadStudentActivationRatio:0,onReadParentTotal:0,activeParentTotal:0,onReadParentActivationRatio:0,onReadTeacherTotal:0,activeTeacherTotal:0,onReadTeacherActivationRatio:0,isStandard:0},studentActivationRatioTargetValue:0,style:{width:"100%",height:"100%"},studentData:[{value:"0",name:"注册在读学生数"},{value:"0",name:"在读激活学生数"},{value:"0",name:"当日活跃学生数"}],studentDataLabel:[{value:"0",name:"注册在读学生数"},{value:"0",name:"在读激活学生数"},{value:"0",name:"当日活跃学生数"}],studentActivationRatioView:"0",studentActiveRatioView:"0",teacherData:[{value:"0",name:"在读家长数"},{value:"0",name:"在读激活家长数"},{value:"0",name:"当日活跃家长数"}],teacherDataLabel:[{value:"0",name:"在读家长数"},{value:"0",name:"在读激活家长数"},{value:"0",name:"当日活跃家长数"}],teacherActivationRatioView:"0",teacherActiveRatioView:"0",studentTitle:"学生转化漏斗",teacherTitle:"家长转化漏斗",option:{grid:{left:"8%",right:"8%",bottom:"12%",top:"15%",containLabel:!0},backgroundColor:"#fff",color:["#63D0B0","#70AFEA","#F4BC89"],title:{left:"center",top:20,backgroundColor:"#fff",text:"",textStyle:{color:"#333",fontSize:15}},tooltip:{trigger:"item",show:!0,textStyle:{fontSize:14},confine:!0},calculable:!0,series:[{name:"漏斗图",type:"funnel",left:10,top:60,width:"60%",height:"60%",min:0,max:100,minSize:"30%",maxSize:"100%",sort:"descending",gap:2,label:{normal:{position:"insideRight",verticalAlignment:!0,textStyle:{fontSize:14}}},labelLine:{normal:{length:30,lineStyle:{width:1,type:"solid"}}},itemStyle:{normal:{borderColor:"#fff",borderWidth:1}},data:[]}]}}},mounted:function(){Object(h.r)("04_04_activate_dayly","0"),this.getData()},computed:{},methods:{getData:function(){var t=this,e={};e.agentId=this.infoInform.id,this.flagData=!1,this.loading=!0,d.a.getActivationAnalysis(e,function(e){1e4===e.code&&e.body?(t.tableData={onReadStudentTotal:e.body.inReadStudentTotal,activeStudentTotal:e.body.activeStudentAllTotal,onReadStudentActivationRatio:e.body.onReadStudentActivationRatioStr,onReadParentTotal:e.body.inReadParentTotal,activeParentTotal:e.body.activeParentAllTotal,onReadParentActivationRatio:e.body.onReadParentActivationRatioStr,onReadTeacherTotal:e.body.onJobTeacherTotal,activeTeacherTotal:e.body.activeTeacherAllTotal,onReadTeacherActivationRatio:e.body.onReadTeacherActivationRatioStr,isStandard:e.body.isStandard},t.dateYesterday=e.body.dateYesterday,t.studentActivationRatioTargetValue=e.body.studentActivationRatioTargetValue,t.studentData[0].value=e.body.inReadStudentTotal?100:0,t.studentData[1].value=e.body.inReadStudentTotal?e.body.activeStudentAllTotal/e.body.inReadStudentTotal*100:0,t.studentData[2].value=e.body.inReadStudentTotal?e.body.activeThatDayStudent/e.body.inReadStudentTotal*100:0,t.studentDataLabel[0].value=e.body.inReadStudentTotal,t.studentDataLabel[1].value=e.body.activeStudentAllTotal,t.studentDataLabel[2].value=e.body.activeThatDayStudent,t.studentActivationRatioView=e.body.onReadStudentActivationChangeRatioStr,t.studentActiveRatioView=e.body.currentStudentActiveChangeRatioStr,t.teacherData[0].value=e.body.inReadParentTotal?100:0,t.teacherData[1].value=e.body.inReadParentTotal?e.body.activeParentAllTotal/e.body.inReadParentTotal*100:0,t.teacherData[2].value=e.body.inReadParentTotal?e.body.activeThatDayParent/e.body.inReadParentTotal*100:0,t.teacherDataLabel[0].value=e.body.inReadParentTotal,t.teacherDataLabel[1].value=e.body.activeParentAllTotal,t.teacherDataLabel[2].value=e.body.activeThatDayParent,t.teacherActivationRatioView=e.body.onReadParentActivationRatioStr,t.teacherActiveRatioView=e.body.currentParentActiveChangeRatioStr,t.targetValue=e.body.targetValue?e.body.targetValue:4,t.activationRatio=e.body.activeThan?e.body.activeThan:0,t.exportRatio=e.body.importThan?e.body.importThan:0,t.activationRatio<e.body.targetValue?(t.showColor=!0,t.targetStr="激活比未达标，查看激活报表，去提升激活"):(t.targetStr="去看看每个学校的激活表现吧",t.showColor=!1),t.showData=!0):(t.flagData=!0,t.showData=!1),t.loading=!1})},goBack:function(){Object(h.r)("04_04_back","1"),this.$router.push("/briefing")},parentRatio:function(){this.showAlertFlag=!0},toActiveLink:function(){-1!==this.actionCode.indexOf('"codeId":"ACTIVATE_REPORT_MENU"')?(Object(h.r)("04_04_linkto_activation_report","1"),Object(h.m)("activeAnaly",2),this.$router.push("/activation/1")):Object(h.q)("您没有查看激活报表的权限！")}}}),p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",style:t.showData?"":"background-color:#fff"},[a("div",{staticClass:"flex"},[a("MHeader",{attrs:{headerTitle:"激活分析"},on:{backClick:t.goBack}}),t._v(" "),a("span",{staticClass:"right-text"},[t._v("昨天("+t._s(t.dateYesterday)+")")])],1),t._v(" "),t.showData?a("div",{staticClass:"main"},[a("div",{staticClass:"order-trend"},[a("div",{staticClass:"spr-title"},[a("span",{staticClass:"spr-left"},[a("em",[t._v("激活比")]),t._v(" "),a("i",{staticClass:"icon-answer",on:{click:function(e){t.activeFlag=!0}}})])]),t._v(" "),a("activeBar",{attrs:{targetValue:t.targetValue,activationRatio:t.activationRatio,exportRatio:t.exportRatio}}),t._v(" "),a("div",{staticClass:"active-link",class:t.showColor?"active":"",on:{click:t.toActiveLink}},[a("span",[t._v(t._s(t.targetStr))]),a("i",{class:t.showColor?"icon-right-red":"icon-right"})])],1),t._v(" "),a("div",{staticClass:"order-trend"},[a("div",{staticClass:"spr-title"},[a("span",{staticClass:"spr-left"},[a("em",[t._v("激活率")]),a("i",{staticClass:"icon-answer",on:{click:function(e){t.activeRatio=!0}}})])]),t._v(" "),a("activeTable",{attrs:{tableData:t.tableData}})],1),t._v(" "),a("div",{staticClass:"order-trend"},[t._m(0),t._v(" "),a("div",{staticClass:"chart-box"},[a("div",{staticClass:"chart-line"},[a("activeFunnel",{style:t.style,attrs:{Title:t.studentTitle,funnelDataLabel:t.studentDataLabel,studentActivationRatioView:t.studentActivationRatioView,studentActiveRatioView:t.studentActiveRatioView,funnelData:t.studentData,option:t.option,id:"funnel1"}})],1)]),t._v(" "),a("div",{staticClass:"chart-box"},[a("div",{staticClass:"chart-line"},[a("activeFunnel",{style:t.style,attrs:{Title:t.teacherTitle,funnelDataLabel:t.teacherDataLabel,teacherActivationRatioView:t.teacherActivationRatioView,teacherActiveRatioView:t.teacherActiveRatioView,funnelData:t.teacherData,option:t.option,id:"funnel2"}})],1)])])]):t._e(),t._v(" "),a("no-data",{attrs:{operation:t.flagData}}),t._v(" "),a("dialogModal",{attrs:{isShow:t.activeRatio},on:{close:function(e){t.activeRatio=!1}}},[a("ul",{staticClass:"alert_ul",attrs:{slot:"content"},slot:"content"},[a("li",{staticClass:"example",staticStyle:{"margin-top":"20px"}},[a("p",{staticClass:"raito"},[t._v("激活率:")]),t._v(" "),a("p",{staticClass:"roito-left"},[t._v("导入的用户中有百分之多少激活了。")]),t._v(" "),a("p",{staticClass:"roito-left"},[t._v("激活数"),a("span",[t._v("÷")]),t._v("在读"),a("span",[t._v("/")]),t._v("在职数"),a("span",[t._v("*")]),t._v("100%")])]),t._v(" "),a("li",{staticClass:"example"},[a("p",{staticClass:"raito"},[t._v("学生激活率目标值: "),a("span",[t._v(t._s(t.studentActivationRatioTargetValue)+"%")])])])])]),t._v(" "),a("dialogModal",{attrs:{isShow:t.activeFlag},on:{close:function(e){t.activeFlag=!1}}},[a("ul",{staticClass:"alert_ul",attrs:{slot:"content"},slot:"content"},[a("li",{staticClass:"example",staticStyle:{"margin-top":"20px"}},[a("p",{staticClass:"raito"},[t._v("导入比:")]),t._v(" "),a("p",{staticClass:"roito-left"},[t._v("一个在读学生导入多少个家长。")]),t._v(" "),a("p",{staticClass:"roito-left"},[t._v("在读学生家长数"),a("span",[t._v("÷")]),t._v("在读学生数")])]),t._v(" "),a("li",{staticClass:"example"},[a("p",{staticClass:"raito"},[t._v("激活比:")]),t._v(" "),a("p",{staticClass:"roito-left"},[t._v("一个在读激活学生有多少个激活的家长。")]),t._v(" "),a("p",{staticClass:"roito-left"},[t._v("在读激活家长数"),a("span",[t._v("÷")]),t._v("在读学生数")])]),t._v(" "),a("li",{staticClass:"example"},[a("p",{staticClass:"raito"},[t._v("激活比目标值: "),a("span",[t._v(t._s(t._f("numFilter")(t.targetValue)))])])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"spr-title"},[e("span",{staticClass:"spr-left"},[e("em",[this._v("转化漏斗")])])])}]};var g=a("VU/8")(v,p,!1,function(t){a("xC56")},"data-v-979a1c9a",null);e.default=g.exports},djen:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("X2Oc"),n=a("7+uW"),o=a("Icdr");a("4UDB"),a("5/bM"),a("Oq2I"),a("miEh"),a("80cc"),a("P7ry"),n.default.prototype.$echarts=o;var s={name:"activeFunnel",data:function(){return{chart:{}}},props:{id:{type:String},width:{type:String,default:"100%"},height:{type:String,default:"100%"},Title:{type:String},funnelData:{type:Array},funnelDataLabel:{type:Array},studentActivationRatioView:{type:String},studentActiveRatioView:{type:String},teacherActivationRatioView:{type:String},teacherActiveRatioView:{type:String},option:{type:Object,default:function(){return{grid:{left:"8%",right:"8%",bottom:"12%",top:"15%",containLabel:!0},backgroundColor:"#fff",color:["#30abdf","#0ec3a9","#fbb534"],title:{left:"center",top:20,backgroundColor:"#fff",text:"",textStyle:{color:"#333",fontSize:15}},tooltip:{trigger:"item",show:!0,textStyle:{fontSize:14},confine:!0},calculable:!0,series:[{name:"漏斗图",type:"funnel",left:10,top:60,width:"60%",min:0,max:100,minSize:"5%",maxSize:"100%",sort:"descending",gap:2,label:{normal:{position:"right",verticalAlignment:!0,textStyle:{fontSize:14}}},labelLine:{normal:{length:30,lineStyle:{width:1,type:"solid"}}},itemStyle:{normal:{borderColor:"#fff",borderWidth:1}},data:[]}]}}}},mounted:function(){this.init()},computed:{style:function(){return{height:this.height,width:this.width}}},methods:{init:function(){var t=this;this.chart=this.$echarts.init(document.getElementById(this.id)),this.chart.setOption(this.option),this.option.series[0].data=this.funnelData,this.option.series[0].name=this.Title,this.option.title.text=this.Title,this.option.tooltip={trigger:"item",show:!0,textStyle:{fontSize:14},confine:!0,formatter:function(e){var a="";switch(e.data.name){case"注册在读学生数":a=e.data.name+"&nbsp;:&nbsp;"+Object(i.p)(t.funnelDataLabel[e.dataIndex].value);break;case"在读激活学生数":a=e.data.name+"&nbsp;:&nbsp;"+Object(i.p)(t.funnelDataLabel[e.dataIndex].value)+"&nbsp;:&nbsp;转化率 : "+t.studentActivationRatioView;break;case"当日活跃学生数":a=e.data.name+"&nbsp;:&nbsp;"+Object(i.p)(t.funnelDataLabel[e.dataIndex].value)+"&nbsp;:&nbsp;转化率 : "+t.studentActiveRatioView;break;case"在读家长数":a=e.data.name+"&nbsp;:&nbsp;"+Object(i.p)(t.funnelDataLabel[e.dataIndex].value);break;case"在读激活家长数":a=e.data.name+"&nbsp;:&nbsp;"+Object(i.p)(t.funnelDataLabel[e.dataIndex].value)+"&nbsp;:&nbsp;转化率 : "+t.teacherActivationRatioView;break;case"当日活跃家长数":a=e.data.name+"&nbsp;:&nbsp;"+Object(i.p)(t.funnelDataLabel[e.dataIndex].value)+"&nbsp;:&nbsp;转化率 : "+t.teacherActiveRatioView}return a}},this.option.series[0].label={normal:{position:"right",textStyle:{fontSize:14},formatter:function(e){var a="";switch(e.data.name){case"注册在读学生数":a=e.data.name+" :\n "+Object(i.p)(t.funnelDataLabel[e.dataIndex].value);break;case"在读激活学生数":a=e.data.name+" :\n "+Object(i.p)(t.funnelDataLabel[e.dataIndex].value)+"\n转化率 : "+t.studentActivationRatioView;break;case"当日活跃学生数":a=e.data.name+" : \n"+Object(i.p)(t.funnelDataLabel[e.dataIndex].value)+"\n转化率 : "+t.studentActiveRatioView;break;case"在读家长数":a=e.data.name+" : \n"+Object(i.p)(t.funnelDataLabel[e.dataIndex].value);break;case"在读激活家长数":a=e.data.name+" : \n"+Object(i.p)(t.funnelDataLabel[e.dataIndex].value)+"\n转化率 : "+t.teacherActivationRatioView;break;case"当日活跃家长数":a=e.data.name+" : \n"+Object(i.p)(t.funnelDataLabel[e.dataIndex].value)+"\n转化率 : "+t.teacherActiveRatioView}return"{center|"+a+"}"},rich:{center:{align:"center",fontSize:"11"}}}},this.chart.setOption(this.option),window.addEventListener("resize",this.chart.resize)}},watch:{funnelData:{handler:function(t,e){if(this.chart)if(this.chart.clear(),t){var a=this;this.$set(this.option.series[0],"data",t),this.$set(this.option.title,"text",this.Title),this.$set(this.option.series[0],"name",this.Title),this.option.tooltip={trigger:"item",show:!0,textStyle:{fontSize:14},confine:!0,formatter:function(t){var e="";switch(t.data.name){case"注册在读学生数":e=t.data.name+"&nbsp;:&nbsp;"+Object(i.p)(a.funnelDataLabel[t.dataIndex].value);break;case"在读激活学生数":e=t.data.name+"&nbsp;:&nbsp;"+Object(i.p)(a.funnelDataLabel[t.dataIndex].value)+"&nbsp;:&nbsp;转化率 : "+a.studentActivationRatioView;break;case"当日活跃学生数":e=t.data.name+"&nbsp;:&nbsp;"+Object(i.p)(a.funnelDataLabel[t.dataIndex].value)+"&nbsp;:&nbsp;转化率 : "+a.studentActiveRatioView;break;case"在读家长数":e=t.data.name+"&nbsp;:&nbsp;"+Object(i.p)(a.funnelDataLabel[t.dataIndex].value);break;case"在读激活家长数":e=t.data.name+"&nbsp;:&nbsp;"+Object(i.p)(a.funnelDataLabel[t.dataIndex].value)+"&nbsp;:&nbsp;转化率 : "+a.teacherActivationRatioView;break;case"当日活跃家长数":e=t.data.name+"&nbsp;:&nbsp;"+Object(i.p)(a.funnelDataLabel[t.dataIndex].value)+"&nbsp;:&nbsp;转化率 : "+a.teacherActiveRatioView}return e}},this.option.series[0].label={normal:{position:"insideRight",textStyle:{fontSize:14},formatter:function(t){var e="";switch(t.data.name){case"注册在读学生数":e=t.data.name+" :\n "+Object(i.p)(a.funnelDataLabel[t.dataIndex].value);break;case"在读激活学生数":e=t.data.name+" :\n "+Object(i.p)(a.funnelDataLabel[t.dataIndex].value)+"\n转化率 : "+a.studentActivationRatioView;break;case"当日活跃学生数":e=t.data.name+" : \n"+Object(i.p)(a.funnelDataLabel[t.dataIndex].value)+"\n转化率 : "+a.studentActiveRatioView;break;case"在读家长数":e=t.data.name+" : \n"+Object(i.p)(a.funnelDataLabel[t.dataIndex].value);break;case"在读激活家长数":e=t.data.name+" : \n"+Object(i.p)(a.funnelDataLabel[t.dataIndex].value)+"\n转化率 : "+a.teacherActivationRatioView;break;case"当日活跃家长数":e=t.data.name+" : \n"+Object(i.p)(a.funnelDataLabel[t.dataIndex].value)+"\n转化率 : "+a.teacherActiveRatioView}return"{center|"+e+"}"},rich:{center:{align:"center",fontSize:"11"}}}},this.chart.setOption(this.option)}else this.$set(this.option.series[0],"data",e),this.$set(this.option.series[0],"name",this.Title),this.chart.setOption(this.option);else this.init()},deep:!0}}},r={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{style:this.style,attrs:{id:this.id}})},staticRenderFns:[]};var l=a("VU/8")(s,r,!1,function(t){a("LtjE")},"data-v-4ba05222",null);e.default=l.exports},dp0Z:function(t,e,a){var i=a("6JAQ"),n=a("1Xuh"),o=n.mergeLayoutParam,s=n.getLayoutParams,r=i.extend({type:"legend.scroll",setScrollDataIndex:function(t){this.option.scrollDataIndex=t},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(t,e,a,i){var n=s(t);r.superCall(this,"init",t,e,a,i),l(this,t,n)},mergeOption:function(t,e){r.superCall(this,"mergeOption",t,e),l(this,this.option,t)},getOrient:function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}}});function l(t,e,a){var i=[1,1];i[t.getOrient().index]=0,o(e,a,{type:"box",ignoreSize:i})}var c=r;t.exports=c},eQYg:function(t,e,a){var i=a("Icdr"),n=a("/gZK"),o=a("vXqC").defaultEmphasis,s=i.extendSeriesModel({type:"series.funnel",init:function(t){s.superApply(this,"init",arguments),this.legendDataProvider=function(){return this.getRawData()},this._defaultLabelLine(t)},getInitialData:function(t,e){return n(this,["value"])},_defaultLabelLine:function(t){o(t,"labelLine",["show"]);var e=t.labelLine,a=t.emphasis.labelLine;e.show=e.show&&t.label.show,a.show=a.show&&t.emphasis.label.show},getDataParams:function(t){var e=this.getData(),a=s.superCall(this,"getDataParams",t),i=e.mapDimension("value"),n=e.getSum(i);return a.percent=n?+(e.get(i,t)/n*100).toFixed(2):0,a.$vars.push("percent"),a},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}}}}),r=s;t.exports=r},gULd:function(t,e){},h4VJ:function(t,e,a){var i=a("0sHC"),n=a("/gxq"),o=a("Ylhr");function s(t,e){i.Group.call(this);var a=new i.Polygon,n=new i.Polyline,o=new i.Text;function s(){n.ignore=n.hoverIgnore,o.ignore=o.hoverIgnore}function r(){n.ignore=n.normalIgnore,o.ignore=o.normalIgnore}this.add(a),this.add(n),this.add(o),this.updateData(t,e,!0),this.on("emphasis",s).on("normal",r).on("mouseover",s).on("mouseout",r)}var r=s.prototype,l=["itemStyle","opacity"];r.updateData=function(t,e,a){var o=this.childAt(0),s=t.hostModel,r=t.getItemModel(e),c=t.getItemLayout(e),d=t.getItemModel(e).get(l);d=null==d?1:d,o.useStyle({}),a?(o.setShape({points:c.points}),o.setStyle({opacity:0}),i.initProps(o,{style:{opacity:d}},s,e)):i.updateProps(o,{style:{opacity:d},shape:{points:c.points}},s,e);var u=r.getModel("itemStyle"),h=t.getItemVisual(e,"color");o.setStyle(n.defaults({lineJoin:"round",fill:h},u.getItemStyle(["opacity"]))),o.hoverStyle=u.getModel("emphasis").getItemStyle(),this._updateLabel(t,e),i.setHoverStyle(this)},r._updateLabel=function(t,e){var a=this.childAt(1),n=this.childAt(2),o=t.hostModel,s=t.getItemModel(e),r=t.getItemLayout(e).label,l=t.getItemVisual(e,"color");i.updateProps(a,{shape:{points:r.linePoints||r.linePoints}},o,e),i.updateProps(n,{style:{x:r.x,y:r.y}},o,e),n.attr({rotation:r.rotation,origin:[r.x,r.y],z2:10});var c=s.getModel("label"),d=s.getModel("emphasis.label"),u=s.getModel("labelLine"),h=s.getModel("emphasis.labelLine");l=t.getItemVisual(e,"color");i.setLabelStyle(n.style,n.hoverStyle={},c,d,{labelFetcher:t.hostModel,labelDataIndex:e,defaultText:t.getName(e),autoColor:l,useInsideStyle:!!r.inside},{textAlign:r.textAlign,textVerticalAlign:r.verticalAlign}),n.ignore=n.normalIgnore=!c.get("show"),n.hoverIgnore=!d.get("show"),a.ignore=a.normalIgnore=!u.get("show"),a.hoverIgnore=!h.get("show"),a.setStyle({stroke:l}),a.setStyle(u.getModel("lineStyle").getLineStyle()),a.hoverStyle=h.getModel("lineStyle").getLineStyle()},n.inherits(s,i.Group);var c=o.extend({type:"funnel",render:function(t,e,a){var i=t.getData(),n=this._data,o=this.group;i.diff(n).add(function(t){var e=new s(i,t);i.setItemGraphicEl(t,e),o.add(e)}).update(function(t,e){var a=n.getItemGraphicEl(e);a.updateData(i,t),o.add(a),i.setItemGraphicEl(t,a)}).remove(function(t){var e=n.getItemGraphicEl(t);o.remove(e)}).execute(),this._data=i},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}});t.exports=c},wLWv:function(t,e,a){var i=a("/gxq"),n=a("0sHC"),o=a("1Xuh"),s=a("8RN9"),r=n.Group,l=["width","height"],c=["x","y"],d=s.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){d.superCall(this,"init"),this._currentIndex=0,this.group.add(this._containerGroup=new r),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new r),this._showController},resetInner:function(){d.superCall(this,"resetInner"),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInner:function(t,e,a,o){var s=this;d.superCall(this,"renderInner",t,e,a,o);var r=this._controllerGroup,l=e.get("pageIconSize",!0);i.isArray(l)||(l=[l,l]),u("pagePrev",0);var c=e.getModel("pageTextStyle");function u(t,a){var c=t+"DataIndex",d=n.createIcon(e.get("pageIcons",!0)[e.getOrient().name][a],{onclick:i.bind(s._pageGo,s,c,e,o)},{x:-l[0]/2,y:-l[1]/2,width:l[0],height:l[1]});d.name=t,r.add(d)}r.add(new n.Text({name:"pageText",style:{textFill:c.getTextColor(),font:c.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0})),u("pageNext",1)},layoutInner:function(t,e,a,s){var r=this.getContentGroup(),d=this._containerGroup,u=this._controllerGroup,h=t.getOrient().index,v=l[h],p=l[1-h],g=c[1-h];o.box(t.get("orient"),r,t.get("itemGap"),h?a.width:null,h?null:a.height),o.box("horizontal",u,t.get("pageButtonItemGap",!0));var f=r.getBoundingRect(),b=u.getBoundingRect(),m=this._showController=f[v]>a[v],_=[-f.x,-f.y];s||(_[h]=r.position[h]);var x=[0,0],y=[-b.x,-b.y],w=i.retrieve2(t.get("pageButtonGap",!0),t.get("itemGap",!0));m&&("end"===t.get("pageButtonPosition",!0)?y[h]+=a[v]-b[v]:x[h]+=b[v]+w);y[1-h]+=f[p]/2-b[p]/2,r.attr("position",_),d.attr("position",x),u.attr("position",y);var R=this.group.getBoundingRect();if((R={x:0,y:0})[v]=m?a[v]:f[v],R[p]=Math.max(f[p],b[p]),R[g]=Math.min(0,b[g]+y[1-h]),d.__rectSize=a[v],m){var T={x:0,y:0};T[v]=Math.max(a[v]-b[v]-w,0),T[p]=R[p],d.setClipPath(new n.Rect({shape:T})),d.__rectSize=T[v]}else u.eachChild(function(t){t.attr({invisible:!0,silent:!0})});var A=this._getPageInfo(t);return null!=A.pageIndex&&n.updateProps(r,{position:A.contentPosition},!!m&&t),this._updatePageInfoView(t,A),R},_pageGo:function(t,e,a){var i=this._getPageInfo(e)[t];null!=i&&a.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:e.id})},_updatePageInfoView:function(t,e){var a=this._controllerGroup;i.each(["pagePrev","pageNext"],function(i){var n=null!=e[i+"DataIndex"],o=a.childOfName(i);o&&(o.setStyle("fill",n?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),o.cursor=n?"pointer":"default")});var n=a.childOfName("pageText"),o=t.get("pageFormatter"),s=e.pageIndex,r=null!=s?s+1:0,l=e.pageCount;n&&o&&n.setStyle("text",i.isString(o)?o.replace("{current}",r).replace("{total}",l):o({current:r,total:l}))},_getPageInfo:function(t){var e=t.get("scrollDataIndex",!0),a=this.getContentGroup(),i=this._containerGroup.__rectSize,n=t.getOrient().index,o=l[n],s=c[n],r=this._findTargetItemIndex(e),d=a.children(),u=d[r],h=d.length,v=h?1:0,p={contentPosition:a.position.slice(),pageCount:v,pageIndex:v-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!u)return p;var g=x(u);p.contentPosition[n]=-g.s;for(var f=r+1,b=g,m=g,_=null;f<=h;++f)(!(_=x(d[f]))&&m.e>b.s+i||_&&!y(_,b.s))&&(b=m.i>b.i?m:_)&&(null==p.pageNextDataIndex&&(p.pageNextDataIndex=b.i),++p.pageCount),m=_;for(f=r-1,b=g,m=g,_=null;f>=-1;--f)(_=x(d[f]))&&y(m,_.s)||!(b.i<m.i)||(m=b,null==p.pagePrevDataIndex&&(p.pagePrevDataIndex=b.i),++p.pageCount,++p.pageIndex),b=_;return p;function x(t){if(t){var e=t.getBoundingRect(),a=e[s]+t.position[n];return{s:a,e:a+e[o],i:t.__legendDataIndex}}}function y(t,e){return t.e>=e&&t.s<=e+i}},_findTargetItemIndex:function(t){var e,a=this.getContentGroup();return this._showController?a.eachChild(function(a,i){a.__legendDataIndex===t&&(e=i)}):e=0,e}}),u=d;t.exports=u},xC56:function(t,e){}});